import{b as A,g as p,q as c,c as g,p as y,l as W,m as u}from"./quests-f3809c5e.js";WA.onInit().then(async()=>{console.log("loading main.ts"),WA.controls.disableInviteButton(),WA.controls.disableMapEditor(),WA.controls.disableRoomList();try{await A(),console.log("Scripting API Extra ready")}catch(i){console.error(i)}});WA.onInit().then(async()=>{const i=await p();for(const e of i){let t,a=WA.player.name;console.log("Player name:",a),WA.room.area.onEnter(e.name).subscribe(()=>{t=WA.ui.displayActionMessage({message:`[LEERTASTE] drÃ¼cken um mit ${e.npcName} zu sprechen.`,callback:()=>{var s;if(WA.chat.sendChatMessage(e.chatText.replace("{NameOfPlayer}",a),e.npcName),e.triggerQuest){const r=WA.player.state.currentQuest,n=(s=c.find(o=>o.questId===e.triggerQuest))==null?void 0:s.requireQuest;r===n&&(WA.player.state.currentQuest=e.triggerQuest)}}}),WA.room.area.onLeave(e.name).subscribe(()=>{WA.chat.close()})}),WA.room.area.onLeave(e.name).subscribe(()=>{t&&(t.remove(),WA.chat.close())})}WA.player.onPlayerMove(async({x:e,y:t,moving:a})=>{var r,n,o;const s=await g({x:e,y:t});if(!s){(r=u)==null||r.stop();return}if(!a&&!s){(n=u)==null||n.stop();return}else(o=u)==null||o.stop(),y(s)});const m=WA.player.state.currentQuest,l=c.find(e=>e.questId===m);l&&d(l.questId),WA.player.state.onVariableChange("currentQuest").subscribe(e=>{W("notlog",10);const t=c.find(a=>a.questId===e);t&&d(t.questId)});function d(e){const t=c.find(a=>a.questId===e);t&&WA.ui.banner.openBanner({id:t.questId,text:t.questDescription,bgColor:"#1B1B29",textColor:"#FFFFFF",timeToClose:0,closable:!1})}});
//# sourceMappingURL=final-notlog-main-ca6edf69.js.map
