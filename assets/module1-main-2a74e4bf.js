import{b as A,g as f,q as d,c as y,p as b,l as W,m}from"./quests-07e5fd28.js";WA.onInit().then(async()=>{try{await A(),WA.controls.disableInviteButton(),WA.controls.disableMapEditor(),console.log("Scripting API Extra ready")}catch(a){console.error(a)}WA.onInit().then(async()=>{const a=await f();for(const e of a){let s,o=WA.player.name;console.log("Player name:",o),WA.room.area.onEnter(e.name).subscribe(()=>{s=WA.ui.displayActionMessage({message:`[LEERTASTE] drÃ¼cken um mit ${e.npcName} zu sprechen.`,callback:()=>{var i;if(WA.chat.sendChatMessage(e.chatText.replace("{NameOfPlayer}",o),e.npcName),e.triggerQuest){const l=WA.player.state.currentQuest,n=(i=d.find(c=>c.questId===e.triggerQuest))==null?void 0:i.requireQuest;l===n&&(WA.player.state.currentQuest=e.triggerQuest)}}}),WA.room.area.onLeave(e.name).subscribe(()=>{WA.chat.close()})}),WA.room.area.onLeave(e.name).subscribe(()=>{s&&(s.remove(),WA.chat.close())})}}),WA.player.onPlayerMove(async({x:a,y:e,moving:s})=>{var i,l,n;const o=await y({x:a,y:e});if(!o){(i=m)==null||i.stop();return}if(!s&&!o){(l=m)==null||l.stop();return}else(n=m)==null||n.stop(),b(o)});const r=WA.player.state.currentQuest,t=d.find(a=>a.questId===r);t&&u(t.questId),WA.player.state.onVariableChange("currentQuest").subscribe(a=>{const e=d.find(s=>s.questId===a);e&&u(e.questId)});function u(a){const e=d.find(s=>s.questId===a);e&&WA.ui.banner.openBanner({id:e.questId,text:e.questDescription,bgColor:"#1B1B29",timeToClose:0,textColor:"#FFFFFF",closable:!1})}});function p(r){const{moduleName:t,triggerValue:u,startX:a,endX:e,startY:s,endY:o}=r;if(WA.player.state[t]!==u)return;const i=[],l=[];for(let n=a;n<=e;n++)for(let c=s;c<=o;c++)i.push({x:n,y:c,tile:"green",layer:"green"}),l.push({x:n,y:c,tile:null,layer:"red"});WA.room.setTiles(i),WA.room.setTiles(l)}const g={module_1_1:{triggerValue:"1",startX:4,endX:15,startY:71,endY:89},module_1_2:{triggerValue:"1",startX:4,endX:15,startY:47,endY:70}};WA.onInit().then(()=>{for(const r in g){const t=g[r];p({moduleName:r,triggerValue:t.triggerValue,startX:t.startX,endX:t.endX,startY:t.startY,endY:t.endY})}});for(const r in g){const t=g[r];WA.player.state.onVariableChange(r).subscribe(u=>{u===t.triggerValue&&p({moduleName:r,triggerValue:t.triggerValue,startX:t.startX,endX:t.endX,startY:t.startY,endY:t.endY})})}const h=["Textarten","3_1_2AllgemeineRegeln","Sprache","Zitiren","ZitierenImText","Literaturverzeichnis","Literaturverwaltung"];for(const r of h)WA.player.state.onVariableChange(r).subscribe(t=>{W("modul_3",10),console.log(`Variable "${r}" changed to:`,t,"Level up, +10XP")});
//# sourceMappingURL=module1-main-2a74e4bf.js.map
