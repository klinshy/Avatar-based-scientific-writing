"use strict";const Ue={};function x(n){return Ue[n.type]===void 0&&(Ue[n.type]=[]),Ue[n.type].push(n.callback),n}var k;(function(n){n.assertEqual=s=>s;function e(s){}n.assertIs=e;function t(s){throw new Error}n.assertNever=t,n.arrayToEnum=s=>{const i={};for(const o of s)i[o]=o;return i},n.getValidEnumValues=s=>{const i=n.objectKeys(s).filter(l=>typeof s[s[l]]!="number"),o={};for(const l of i)o[l]=s[l];return n.objectValues(o)},n.objectValues=s=>n.objectKeys(s).map(function(i){return s[i]}),n.objectKeys=typeof Object.keys=="function"?s=>Object.keys(s):s=>{const i=[];for(const o in s)Object.prototype.hasOwnProperty.call(s,o)&&i.push(o);return i},n.find=(s,i)=>{for(const o of s)if(i(o))return o},n.isInteger=typeof Number.isInteger=="function"?s=>Number.isInteger(s):s=>typeof s=="number"&&isFinite(s)&&Math.floor(s)===s;function a(s,i=" | "){return s.map(o=>typeof o=="string"?`'${o}'`:o).join(i)}n.joinValues=a,n.jsonStringifyReplacer=(s,i)=>typeof i=="bigint"?i.toString():i})(k||(k={}));var pt;(function(n){n.mergeShapes=(e,t)=>({...e,...t})})(pt||(pt={}));const f=k.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),B=n=>{switch(typeof n){case"undefined":return f.undefined;case"string":return f.string;case"number":return isNaN(n)?f.nan:f.number;case"boolean":return f.boolean;case"function":return f.function;case"bigint":return f.bigint;case"symbol":return f.symbol;case"object":return Array.isArray(n)?f.array:n===null?f.null:n.then&&typeof n.then=="function"&&n.catch&&typeof n.catch=="function"?f.promise:typeof Map<"u"&&n instanceof Map?f.map:typeof Set<"u"&&n instanceof Set?f.set:typeof Date<"u"&&n instanceof Date?f.date:f.object;default:return f.unknown}},c=k.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),Nr=n=>JSON.stringify(n,null,2).replace(/"([^"]+)":/g,"$1:");class M extends Error{constructor(e){super(),this.issues=[],this.addIssue=a=>{this.issues=[...this.issues,a]},this.addIssues=(a=[])=>{this.issues=[...this.issues,...a]};const t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){const t=e||function(i){return i.message},a={_errors:[]},s=i=>{for(const o of i.issues)if(o.code==="invalid_union")o.unionErrors.map(s);else if(o.code==="invalid_return_type")s(o.returnTypeError);else if(o.code==="invalid_arguments")s(o.argumentsError);else if(o.path.length===0)a._errors.push(t(o));else{let l=a,d=0;for(;d<o.path.length;){const h=o.path[d];d===o.path.length-1?(l[h]=l[h]||{_errors:[]},l[h]._errors.push(t(o))):l[h]=l[h]||{_errors:[]},l=l[h],d++}}};return s(this),a}static assert(e){if(!(e instanceof M))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,k.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=t=>t.message){const t={},a=[];for(const s of this.issues)s.path.length>0?(t[s.path[0]]=t[s.path[0]]||[],t[s.path[0]].push(e(s))):a.push(e(s));return{formErrors:a,fieldErrors:t}}get formErrors(){return this.flatten()}}M.create=n=>new M(n);const ne=(n,e)=>{let t;switch(n.code){case c.invalid_type:n.received===f.undefined?t="Required":t=`Expected ${n.expected}, received ${n.received}`;break;case c.invalid_literal:t=`Invalid literal value, expected ${JSON.stringify(n.expected,k.jsonStringifyReplacer)}`;break;case c.unrecognized_keys:t=`Unrecognized key(s) in object: ${k.joinValues(n.keys,", ")}`;break;case c.invalid_union:t="Invalid input";break;case c.invalid_union_discriminator:t=`Invalid discriminator value. Expected ${k.joinValues(n.options)}`;break;case c.invalid_enum_value:t=`Invalid enum value. Expected ${k.joinValues(n.options)}, received '${n.received}'`;break;case c.invalid_arguments:t="Invalid function arguments";break;case c.invalid_return_type:t="Invalid function return type";break;case c.invalid_date:t="Invalid date";break;case c.invalid_string:typeof n.validation=="object"?"includes"in n.validation?(t=`Invalid input: must include "${n.validation.includes}"`,typeof n.validation.position=="number"&&(t=`${t} at one or more positions greater than or equal to ${n.validation.position}`)):"startsWith"in n.validation?t=`Invalid input: must start with "${n.validation.startsWith}"`:"endsWith"in n.validation?t=`Invalid input: must end with "${n.validation.endsWith}"`:k.assertNever(n.validation):n.validation!=="regex"?t=`Invalid ${n.validation}`:t="Invalid";break;case c.too_small:n.type==="array"?t=`Array must contain ${n.exact?"exactly":n.inclusive?"at least":"more than"} ${n.minimum} element(s)`:n.type==="string"?t=`String must contain ${n.exact?"exactly":n.inclusive?"at least":"over"} ${n.minimum} character(s)`:n.type==="number"?t=`Number must be ${n.exact?"exactly equal to ":n.inclusive?"greater than or equal to ":"greater than "}${n.minimum}`:n.type==="date"?t=`Date must be ${n.exact?"exactly equal to ":n.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(n.minimum))}`:t="Invalid input";break;case c.too_big:n.type==="array"?t=`Array must contain ${n.exact?"exactly":n.inclusive?"at most":"less than"} ${n.maximum} element(s)`:n.type==="string"?t=`String must contain ${n.exact?"exactly":n.inclusive?"at most":"under"} ${n.maximum} character(s)`:n.type==="number"?t=`Number must be ${n.exact?"exactly":n.inclusive?"less than or equal to":"less than"} ${n.maximum}`:n.type==="bigint"?t=`BigInt must be ${n.exact?"exactly":n.inclusive?"less than or equal to":"less than"} ${n.maximum}`:n.type==="date"?t=`Date must be ${n.exact?"exactly":n.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(n.maximum))}`:t="Invalid input";break;case c.custom:t="Invalid input";break;case c.invalid_intersection_types:t="Intersection results could not be merged";break;case c.not_multiple_of:t=`Number must be a multiple of ${n.multipleOf}`;break;case c.not_finite:t="Number must be finite";break;default:t=e.defaultError,k.assertNever(n)}return{message:t}};let ur=ne;function Vr(n){ur=n}function Ne(){return ur}const Ve=n=>{const{data:e,path:t,errorMaps:a,issueData:s}=n,i=[...t,...s.path||[]],o={...s,path:i};if(s.message!==void 0)return{...s,path:i,message:s.message};let l="";const d=a.filter(h=>!!h).slice().reverse();for(const h of d)l=h(o,{data:e,defaultError:l}).message;return{...s,path:i,message:l}},Br=[];function p(n,e){const t=Ne(),a=Ve({issueData:e,data:n.data,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,t,t===ne?void 0:ne].filter(s=>!!s)});n.common.issues.push(a)}class T{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,t){const a=[];for(const s of t){if(s.status==="aborted")return g;s.status==="dirty"&&e.dirty(),a.push(s.value)}return{status:e.value,value:a}}static async mergeObjectAsync(e,t){const a=[];for(const s of t){const i=await s.key,o=await s.value;a.push({key:i,value:o})}return T.mergeObjectSync(e,a)}static mergeObjectSync(e,t){const a={};for(const s of t){const{key:i,value:o}=s;if(i.status==="aborted"||o.status==="aborted")return g;i.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),i.value!=="__proto__"&&(typeof o.value<"u"||s.alwaysSet)&&(a[i.value]=o.value)}return{status:e.value,value:a}}}const g=Object.freeze({status:"aborted"}),Q=n=>({status:"dirty",value:n}),A=n=>({status:"valid",value:n}),ft=n=>n.status==="aborted",mt=n=>n.status==="dirty",me=n=>n.status==="valid",ye=n=>typeof Promise<"u"&&n instanceof Promise;function Be(n,e,t,a){if(t==="a"&&!a)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!a:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?a:t==="a"?a.call(n):a?a.value:e.get(n)}function hr(n,e,t,a,s){if(a==="m")throw new TypeError("Private method is not writable");if(a==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!s:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return a==="a"?s.call(n,t):s?s.value=t:e.set(n,t),t}var m;(function(n){n.errToObj=e=>typeof e=="string"?{message:e}:e||{},n.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(m||(m={}));var de,ue;class U{constructor(e,t,a,s){this._cachedPath=[],this.parent=e,this.data=t,this._path=a,this._key=s}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const Rt=(n,e)=>{if(me(e))return{success:!0,data:e.value};if(!n.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const t=new M(n.common.issues);return this._error=t,this._error}}};function v(n){if(!n)return{};const{errorMap:e,invalid_type_error:t,required_error:a,description:s}=n;if(e&&(t||a))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:s}:{errorMap:(o,l)=>{var d,h;const{message:y}=n;return o.code==="invalid_enum_value"?{message:y??l.defaultError}:typeof l.data>"u"?{message:(d=y??a)!==null&&d!==void 0?d:l.defaultError}:o.code!=="invalid_type"?{message:l.defaultError}:{message:(h=y??t)!==null&&h!==void 0?h:l.defaultError}},description:s}}class w{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return B(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:B(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new T,ctx:{common:e.parent.common,data:e.data,parsedType:B(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const t=this._parse(e);if(ye(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(e){const t=this._parse(e);return Promise.resolve(t)}parse(e,t){const a=this.safeParse(e,t);if(a.success)return a.data;throw a.error}safeParse(e,t){var a;const s={common:{issues:[],async:(a=t==null?void 0:t.async)!==null&&a!==void 0?a:!1,contextualErrorMap:t==null?void 0:t.errorMap},path:(t==null?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:B(e)},i=this._parseSync({data:e,path:s.path,parent:s});return Rt(s,i)}async parseAsync(e,t){const a=await this.safeParseAsync(e,t);if(a.success)return a.data;throw a.error}async safeParseAsync(e,t){const a={common:{issues:[],contextualErrorMap:t==null?void 0:t.errorMap,async:!0},path:(t==null?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:B(e)},s=this._parse({data:e,path:a.path,parent:a}),i=await(ye(s)?s:Promise.resolve(s));return Rt(a,i)}refine(e,t){const a=s=>typeof t=="string"||typeof t>"u"?{message:t}:typeof t=="function"?t(s):t;return this._refinement((s,i)=>{const o=e(s),l=()=>i.addIssue({code:c.custom,...a(s)});return typeof Promise<"u"&&o instanceof Promise?o.then(d=>d?!0:(l(),!1)):o?!0:(l(),!1)})}refinement(e,t){return this._refinement((a,s)=>e(a)?!0:(s.addIssue(typeof t=="function"?t(a,s):t),!1))}_refinement(e){return new R({schema:this,typeName:b.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return Z.create(this,this._def)}nullable(){return q.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return W.create(this,this._def)}promise(){return se.create(this,this._def)}or(e){return _e.create([this,e],this._def)}and(e){return we.create(this,e,this._def)}transform(e){return new R({...v(this._def),schema:this,typeName:b.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const t=typeof e=="function"?e:()=>e;return new je({...v(this._def),innerType:this,defaultValue:t,typeName:b.ZodDefault})}brand(){return new At({typeName:b.ZodBranded,type:this,...v(this._def)})}catch(e){const t=typeof e=="function"?e:()=>e;return new Pe({...v(this._def),innerType:this,catchValue:t,typeName:b.ZodCatch})}describe(e){const t=this.constructor;return new t({...this._def,description:e})}pipe(e){return Ae.create(this,e)}readonly(){return Ce.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const zr=/^c[^\s-]{8,}$/i,Dr=/^[0-9a-z]+$/,$r=/^[0-9A-HJKMNP-TV-Z]{26}$/,qr=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,Yr=/^[a-z0-9_-]{21}$/i,Hr=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,Jr=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,Kr="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let Xe;const Fr=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,Gr=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,Xr=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,pr="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",Qr=new RegExp(`^${pr}$`);function fr(n){let e="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return n.precision?e=`${e}\\.\\d{${n.precision}}`:n.precision==null&&(e=`${e}(\\.\\d+)?`),e}function en(n){return new RegExp(`^${fr(n)}$`)}function mr(n){let e=`${pr}T${fr(n)}`;const t=[];return t.push(n.local?"Z?":"Z"),n.offset&&t.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${t.join("|")})`,new RegExp(`^${e}$`)}function tn(n,e){return!!((e==="v4"||!e)&&Fr.test(n)||(e==="v6"||!e)&&Gr.test(n))}class I extends w{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==f.string){const i=this._getOrReturnCtx(e);return p(i,{code:c.invalid_type,expected:f.string,received:i.parsedType}),g}const a=new T;let s;for(const i of this._def.checks)if(i.kind==="min")e.data.length<i.value&&(s=this._getOrReturnCtx(e,s),p(s,{code:c.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),a.dirty());else if(i.kind==="max")e.data.length>i.value&&(s=this._getOrReturnCtx(e,s),p(s,{code:c.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),a.dirty());else if(i.kind==="length"){const o=e.data.length>i.value,l=e.data.length<i.value;(o||l)&&(s=this._getOrReturnCtx(e,s),o?p(s,{code:c.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):l&&p(s,{code:c.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),a.dirty())}else if(i.kind==="email")Jr.test(e.data)||(s=this._getOrReturnCtx(e,s),p(s,{validation:"email",code:c.invalid_string,message:i.message}),a.dirty());else if(i.kind==="emoji")Xe||(Xe=new RegExp(Kr,"u")),Xe.test(e.data)||(s=this._getOrReturnCtx(e,s),p(s,{validation:"emoji",code:c.invalid_string,message:i.message}),a.dirty());else if(i.kind==="uuid")qr.test(e.data)||(s=this._getOrReturnCtx(e,s),p(s,{validation:"uuid",code:c.invalid_string,message:i.message}),a.dirty());else if(i.kind==="nanoid")Yr.test(e.data)||(s=this._getOrReturnCtx(e,s),p(s,{validation:"nanoid",code:c.invalid_string,message:i.message}),a.dirty());else if(i.kind==="cuid")zr.test(e.data)||(s=this._getOrReturnCtx(e,s),p(s,{validation:"cuid",code:c.invalid_string,message:i.message}),a.dirty());else if(i.kind==="cuid2")Dr.test(e.data)||(s=this._getOrReturnCtx(e,s),p(s,{validation:"cuid2",code:c.invalid_string,message:i.message}),a.dirty());else if(i.kind==="ulid")$r.test(e.data)||(s=this._getOrReturnCtx(e,s),p(s,{validation:"ulid",code:c.invalid_string,message:i.message}),a.dirty());else if(i.kind==="url")try{new URL(e.data)}catch{s=this._getOrReturnCtx(e,s),p(s,{validation:"url",code:c.invalid_string,message:i.message}),a.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(e.data)||(s=this._getOrReturnCtx(e,s),p(s,{validation:"regex",code:c.invalid_string,message:i.message}),a.dirty())):i.kind==="trim"?e.data=e.data.trim():i.kind==="includes"?e.data.includes(i.value,i.position)||(s=this._getOrReturnCtx(e,s),p(s,{code:c.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),a.dirty()):i.kind==="toLowerCase"?e.data=e.data.toLowerCase():i.kind==="toUpperCase"?e.data=e.data.toUpperCase():i.kind==="startsWith"?e.data.startsWith(i.value)||(s=this._getOrReturnCtx(e,s),p(s,{code:c.invalid_string,validation:{startsWith:i.value},message:i.message}),a.dirty()):i.kind==="endsWith"?e.data.endsWith(i.value)||(s=this._getOrReturnCtx(e,s),p(s,{code:c.invalid_string,validation:{endsWith:i.value},message:i.message}),a.dirty()):i.kind==="datetime"?mr(i).test(e.data)||(s=this._getOrReturnCtx(e,s),p(s,{code:c.invalid_string,validation:"datetime",message:i.message}),a.dirty()):i.kind==="date"?Qr.test(e.data)||(s=this._getOrReturnCtx(e,s),p(s,{code:c.invalid_string,validation:"date",message:i.message}),a.dirty()):i.kind==="time"?en(i).test(e.data)||(s=this._getOrReturnCtx(e,s),p(s,{code:c.invalid_string,validation:"time",message:i.message}),a.dirty()):i.kind==="duration"?Hr.test(e.data)||(s=this._getOrReturnCtx(e,s),p(s,{validation:"duration",code:c.invalid_string,message:i.message}),a.dirty()):i.kind==="ip"?tn(e.data,i.version)||(s=this._getOrReturnCtx(e,s),p(s,{validation:"ip",code:c.invalid_string,message:i.message}),a.dirty()):i.kind==="base64"?Xr.test(e.data)||(s=this._getOrReturnCtx(e,s),p(s,{validation:"base64",code:c.invalid_string,message:i.message}),a.dirty()):k.assertNever(i);return{status:a.value,value:e.data}}_regex(e,t,a){return this.refinement(s=>e.test(s),{validation:t,code:c.invalid_string,...m.errToObj(a)})}_addCheck(e){return new I({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...m.errToObj(e)})}url(e){return this._addCheck({kind:"url",...m.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...m.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...m.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...m.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...m.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...m.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...m.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...m.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...m.errToObj(e)})}datetime(e){var t,a;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(t=e==null?void 0:e.offset)!==null&&t!==void 0?t:!1,local:(a=e==null?void 0:e.local)!==null&&a!==void 0?a:!1,...m.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...m.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...m.errToObj(e)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...m.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:t==null?void 0:t.position,...m.errToObj(t==null?void 0:t.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...m.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...m.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...m.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...m.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...m.errToObj(t)})}nonempty(e){return this.min(1,m.errToObj(e))}trim(){return new I({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new I({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new I({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get minLength(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}I.create=n=>{var e;return new I({checks:[],typeName:b.ZodString,coerce:(e=n==null?void 0:n.coerce)!==null&&e!==void 0?e:!1,...v(n)})};function rn(n,e){const t=(n.toString().split(".")[1]||"").length,a=(e.toString().split(".")[1]||"").length,s=t>a?t:a,i=parseInt(n.toFixed(s).replace(".","")),o=parseInt(e.toFixed(s).replace(".",""));return i%o/Math.pow(10,s)}class z extends w{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==f.number){const i=this._getOrReturnCtx(e);return p(i,{code:c.invalid_type,expected:f.number,received:i.parsedType}),g}let a;const s=new T;for(const i of this._def.checks)i.kind==="int"?k.isInteger(e.data)||(a=this._getOrReturnCtx(e,a),p(a,{code:c.invalid_type,expected:"integer",received:"float",message:i.message}),s.dirty()):i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(a=this._getOrReturnCtx(e,a),p(a,{code:c.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(a=this._getOrReturnCtx(e,a),p(a,{code:c.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="multipleOf"?rn(e.data,i.value)!==0&&(a=this._getOrReturnCtx(e,a),p(a,{code:c.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):i.kind==="finite"?Number.isFinite(e.data)||(a=this._getOrReturnCtx(e,a),p(a,{code:c.not_finite,message:i.message}),s.dirty()):k.assertNever(i);return{status:s.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,m.toString(t))}gt(e,t){return this.setLimit("min",e,!1,m.toString(t))}lte(e,t){return this.setLimit("max",e,!0,m.toString(t))}lt(e,t){return this.setLimit("max",e,!1,m.toString(t))}setLimit(e,t,a,s){return new z({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:a,message:m.toString(s)}]})}_addCheck(e){return new z({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:m.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:m.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:m.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:m.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:m.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:m.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:m.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:m.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:m.toString(e)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&k.isInteger(e.value))}get isFinite(){let e=null,t=null;for(const a of this._def.checks){if(a.kind==="finite"||a.kind==="int"||a.kind==="multipleOf")return!0;a.kind==="min"?(t===null||a.value>t)&&(t=a.value):a.kind==="max"&&(e===null||a.value<e)&&(e=a.value)}return Number.isFinite(t)&&Number.isFinite(e)}}z.create=n=>new z({checks:[],typeName:b.ZodNumber,coerce:(n==null?void 0:n.coerce)||!1,...v(n)});class D extends w{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==f.bigint){const i=this._getOrReturnCtx(e);return p(i,{code:c.invalid_type,expected:f.bigint,received:i.parsedType}),g}let a;const s=new T;for(const i of this._def.checks)i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(a=this._getOrReturnCtx(e,a),p(a,{code:c.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(a=this._getOrReturnCtx(e,a),p(a,{code:c.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="multipleOf"?e.data%i.value!==BigInt(0)&&(a=this._getOrReturnCtx(e,a),p(a,{code:c.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):k.assertNever(i);return{status:s.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,m.toString(t))}gt(e,t){return this.setLimit("min",e,!1,m.toString(t))}lte(e,t){return this.setLimit("max",e,!0,m.toString(t))}lt(e,t){return this.setLimit("max",e,!1,m.toString(t))}setLimit(e,t,a,s){return new D({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:a,message:m.toString(s)}]})}_addCheck(e){return new D({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:m.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:m.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:m.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:m.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:m.toString(t)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}D.create=n=>{var e;return new D({checks:[],typeName:b.ZodBigInt,coerce:(e=n==null?void 0:n.coerce)!==null&&e!==void 0?e:!1,...v(n)})};class be extends w{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==f.boolean){const a=this._getOrReturnCtx(e);return p(a,{code:c.invalid_type,expected:f.boolean,received:a.parsedType}),g}return A(e.data)}}be.create=n=>new be({typeName:b.ZodBoolean,coerce:(n==null?void 0:n.coerce)||!1,...v(n)});class J extends w{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==f.date){const i=this._getOrReturnCtx(e);return p(i,{code:c.invalid_type,expected:f.date,received:i.parsedType}),g}if(isNaN(e.data.getTime())){const i=this._getOrReturnCtx(e);return p(i,{code:c.invalid_date}),g}const a=new T;let s;for(const i of this._def.checks)i.kind==="min"?e.data.getTime()<i.value&&(s=this._getOrReturnCtx(e,s),p(s,{code:c.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),a.dirty()):i.kind==="max"?e.data.getTime()>i.value&&(s=this._getOrReturnCtx(e,s),p(s,{code:c.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),a.dirty()):k.assertNever(i);return{status:a.value,value:new Date(e.data.getTime())}}_addCheck(e){return new J({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:m.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:m.toString(t)})}get minDate(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e!=null?new Date(e):null}}J.create=n=>new J({checks:[],coerce:(n==null?void 0:n.coerce)||!1,typeName:b.ZodDate,...v(n)});class ze extends w{_parse(e){if(this._getType(e)!==f.symbol){const a=this._getOrReturnCtx(e);return p(a,{code:c.invalid_type,expected:f.symbol,received:a.parsedType}),g}return A(e.data)}}ze.create=n=>new ze({typeName:b.ZodSymbol,...v(n)});class ge extends w{_parse(e){if(this._getType(e)!==f.undefined){const a=this._getOrReturnCtx(e);return p(a,{code:c.invalid_type,expected:f.undefined,received:a.parsedType}),g}return A(e.data)}}ge.create=n=>new ge({typeName:b.ZodUndefined,...v(n)});class ve extends w{_parse(e){if(this._getType(e)!==f.null){const a=this._getOrReturnCtx(e);return p(a,{code:c.invalid_type,expected:f.null,received:a.parsedType}),g}return A(e.data)}}ve.create=n=>new ve({typeName:b.ZodNull,...v(n)});class ae extends w{constructor(){super(...arguments),this._any=!0}_parse(e){return A(e.data)}}ae.create=n=>new ae({typeName:b.ZodAny,...v(n)});class H extends w{constructor(){super(...arguments),this._unknown=!0}_parse(e){return A(e.data)}}H.create=n=>new H({typeName:b.ZodUnknown,...v(n)});class HELL extends w{_parse(e){const t=this._getOrReturnCtx(e);return p(t,{code:c.invalid_type,expected:f.never,received:t.parsedType}),g}}HELL.create=n=>new HELL({typeName:b.ZodNever,...v(n)});class De extends w{_parse(e){if(this._getType(e)!==f.undefined){const a=this._getOrReturnCtx(e);return p(a,{code:c.invalid_type,expected:f.void,received:a.parsedType}),g}return A(e.data)}}De.create=n=>new De({typeName:b.ZodVoid,...v(n)});class W extends w{_parse(e){const{ctx:t,status:a}=this._processInputParams(e),s=this._def;if(t.parsedType!==f.array)return p(t,{code:c.invalid_type,expected:f.array,received:t.parsedType}),g;if(s.exactLength!==null){const o=t.data.length>s.exactLength.value,l=t.data.length<s.exactLength.value;(o||l)&&(p(t,{code:o?c.too_big:c.too_small,minimum:l?s.exactLength.value:void 0,maximum:o?s.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:s.exactLength.message}),a.dirty())}if(s.minLength!==null&&t.data.length<s.minLength.value&&(p(t,{code:c.too_small,minimum:s.minLength.value,type:"array",inclusive:!0,exact:!1,message:s.minLength.message}),a.dirty()),s.maxLength!==null&&t.data.length>s.maxLength.value&&(p(t,{code:c.too_big,maximum:s.maxLength.value,type:"array",inclusive:!0,exact:!1,message:s.maxLength.message}),a.dirty()),t.common.async)return Promise.all([...t.data].map((o,l)=>s.type._parseAsync(new U(t,o,t.path,l)))).then(o=>T.mergeArray(a,o));const i=[...t.data].map((o,l)=>s.type._parseSync(new U(t,o,t.path,l)));return T.mergeArray(a,i)}get element(){return this._def.type}min(e,t){return new W({...this._def,minLength:{value:e,message:m.toString(t)}})}max(e,t){return new W({...this._def,maxLength:{value:e,message:m.toString(t)}})}length(e,t){return new W({...this._def,exactLength:{value:e,message:m.toString(t)}})}nonempty(e){return this.min(1,e)}}W.create=(n,e)=>new W({type:n,minLength:null,maxLength:null,exactLength:null,typeName:b.ZodArray,...v(e)});function X(n){if(n instanceof S){const e={};for(const t in n.shape){const a=n.shape[t];e[t]=Z.create(X(a))}return new S({...n._def,shape:()=>e})}else return n instanceof W?new W({...n._def,type:X(n.element)}):n instanceof Z?Z.create(X(n.unwrap())):n instanceof q?q.create(X(n.unwrap())):n instanceof L?L.create(n.items.map(e=>X(e))):n}class S extends w{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),t=k.objectKeys(e);return this._cached={shape:e,keys:t}}_parse(e){if(this._getType(e)!==f.object){const h=this._getOrReturnCtx(e);return p(h,{code:c.invalid_type,expected:f.object,received:h.parsedType}),g}const{status:a,ctx:s}=this._processInputParams(e),{shape:i,keys:o}=this._getCached(),l=[];if(!(this._def.catchall instanceof HELL&&this._def.unknownKeys==="strip"))for(const h in s.data)o.includes(h)||l.push(h);const d=[];for(const h of o){const y=i[h],C=s.data[h];d.push({key:{status:"valid",value:h},value:y._parse(new U(s,C,s.path,h)),alwaysSet:h in s.data})}if(this._def.catchall instanceof HELL){const h=this._def.unknownKeys;if(h==="passthrough")for(const y of l)d.push({key:{status:"valid",value:y},value:{status:"valid",value:s.data[y]}});else if(h==="strict")l.length>0&&(p(s,{code:c.unrecognized_keys,keys:l}),a.dirty());else if(h!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const h=this._def.catchall;for(const y of l){const C=s.data[y];d.push({key:{status:"valid",value:y},value:h._parse(new U(s,C,s.path,y)),alwaysSet:y in s.data})}}return s.common.async?Promise.resolve().then(async()=>{const h=[];for(const y of d){const C=await y.key,F=await y.value;h.push({key:C,value:F,alwaysSet:y.alwaysSet})}return h}).then(h=>T.mergeObjectSync(a,h)):T.mergeObjectSync(a,d)}get shape(){return this._def.shape()}strict(e){return m.errToObj,new S({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(t,a)=>{var s,i,o,l;const d=(o=(i=(s=this._def).errorMap)===null||i===void 0?void 0:i.call(s,t,a).message)!==null&&o!==void 0?o:a.defaultError;return t.code==="unrecognized_keys"?{message:(l=m.errToObj(e).message)!==null&&l!==void 0?l:d}:{message:d}}}:{}})}strip(){return new S({...this._def,unknownKeys:"strip"})}passthrough(){return new S({...this._def,unknownKeys:"passthrough"})}extend(e){return new S({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new S({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:b.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new S({...this._def,catchall:e})}pick(e){const t={};return k.objectKeys(e).forEach(a=>{e[a]&&this.shape[a]&&(t[a]=this.shape[a])}),new S({...this._def,shape:()=>t})}omit(e){const t={};return k.objectKeys(this.shape).forEach(a=>{e[a]||(t[a]=this.shape[a])}),new S({...this._def,shape:()=>t})}deepPartial(){return X(this)}partial(e){const t={};return k.objectKeys(this.shape).forEach(a=>{const s=this.shape[a];e&&!e[a]?t[a]=s:t[a]=s.optional()}),new S({...this._def,shape:()=>t})}required(e){const t={};return k.objectKeys(this.shape).forEach(a=>{if(e&&!e[a])t[a]=this.shape[a];else{let i=this.shape[a];for(;i instanceof Z;)i=i._def.innerType;t[a]=i}}),new S({...this._def,shape:()=>t})}keyof(){return yr(k.objectKeys(this.shape))}}S.create=(n,e)=>new S({shape:()=>n,unknownKeys:"strip",catchall:HELL.create(),typeName:b.ZodObject,...v(e)});S.strictCreate=(n,e)=>new S({shape:()=>n,unknownKeys:"strict",catchall:HELL.create(),typeName:b.ZodObject,...v(e)});S.lazycreate=(n,e)=>new S({shape:n,unknownKeys:"strip",catchall:HELL.create(),typeName:b.ZodObject,...v(e)});class _e extends w{_parse(e){const{ctx:t}=this._processInputParams(e),a=this._def.options;function s(i){for(const l of i)if(l.result.status==="valid")return l.result;for(const l of i)if(l.result.status==="dirty")return t.common.issues.push(...l.ctx.common.issues),l.result;const o=i.map(l=>new M(l.ctx.common.issues));return p(t,{code:c.invalid_union,unionErrors:o}),g}if(t.common.async)return Promise.all(a.map(async i=>{const o={...t,common:{...t.common,issues:[]},parent:null};return{result:await i._parseAsync({data:t.data,path:t.path,parent:o}),ctx:o}})).then(s);{let i;const o=[];for(const d of a){const h={...t,common:{...t.common,issues:[]},parent:null},y=d._parseSync({data:t.data,path:t.path,parent:h});if(y.status==="valid")return y;y.status==="dirty"&&!i&&(i={result:y,ctx:h}),h.common.issues.length&&o.push(h.common.issues)}if(i)return t.common.issues.push(...i.ctx.common.issues),i.result;const l=o.map(d=>new M(d));return p(t,{code:c.invalid_union,unionErrors:l}),g}}get options(){return this._def.options}}_e.create=(n,e)=>new _e({options:n,typeName:b.ZodUnion,...v(e)});const N=n=>n instanceof xe?N(n.schema):n instanceof R?N(n.innerType()):n instanceof Ee?[n.value]:n instanceof $?n.options:n instanceof Se?k.objectValues(n.enum):n instanceof je?N(n._def.innerType):n instanceof ge?[void 0]:n instanceof ve?[null]:n instanceof Z?[void 0,...N(n.unwrap())]:n instanceof q?[null,...N(n.unwrap())]:n instanceof At||n instanceof Ce?N(n.unwrap()):n instanceof Pe?N(n._def.innerType):[];class Fe extends w{_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==f.object)return p(t,{code:c.invalid_type,expected:f.object,received:t.parsedType}),g;const a=this.discriminator,s=t.data[a],i=this.optionsMap.get(s);return i?t.common.async?i._parseAsync({data:t.data,path:t.path,parent:t}):i._parseSync({data:t.data,path:t.path,parent:t}):(p(t,{code:c.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[a]}),g)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,t,a){const s=new Map;for(const i of t){const o=N(i.shape[e]);if(!o.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const l of o){if(s.has(l))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(l)}`);s.set(l,i)}}return new Fe({typeName:b.ZodDiscriminatedUnion,discriminator:e,options:t,optionsMap:s,...v(a)})}}function yt(n,e){const t=B(n),a=B(e);if(n===e)return{valid:!0,data:n};if(t===f.object&&a===f.object){const s=k.objectKeys(e),i=k.objectKeys(n).filter(l=>s.indexOf(l)!==-1),o={...n,...e};for(const l of i){const d=yt(n[l],e[l]);if(!d.valid)return{valid:!1};o[l]=d.data}return{valid:!0,data:o}}else if(t===f.array&&a===f.array){if(n.length!==e.length)return{valid:!1};const s=[];for(let i=0;i<n.length;i++){const o=n[i],l=e[i],d=yt(o,l);if(!d.valid)return{valid:!1};s.push(d.data)}return{valid:!0,data:s}}else return t===f.date&&a===f.date&&+n==+e?{valid:!0,data:n}:{valid:!1}}class we extends w{_parse(e){const{status:t,ctx:a}=this._processInputParams(e),s=(i,o)=>{if(ft(i)||ft(o))return g;const l=yt(i.value,o.value);return l.valid?((mt(i)||mt(o))&&t.dirty(),{status:t.value,value:l.data}):(p(a,{code:c.invalid_intersection_types}),g)};return a.common.async?Promise.all([this._def.left._parseAsync({data:a.data,path:a.path,parent:a}),this._def.right._parseAsync({data:a.data,path:a.path,parent:a})]).then(([i,o])=>s(i,o)):s(this._def.left._parseSync({data:a.data,path:a.path,parent:a}),this._def.right._parseSync({data:a.data,path:a.path,parent:a}))}}we.create=(n,e,t)=>new we({left:n,right:e,typeName:b.ZodIntersection,...v(t)});class L extends w{_parse(e){const{status:t,ctx:a}=this._processInputParams(e);if(a.parsedType!==f.array)return p(a,{code:c.invalid_type,expected:f.array,received:a.parsedType}),g;if(a.data.length<this._def.items.length)return p(a,{code:c.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),g;!this._def.rest&&a.data.length>this._def.items.length&&(p(a,{code:c.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());const i=[...a.data].map((o,l)=>{const d=this._def.items[l]||this._def.rest;return d?d._parse(new U(a,o,a.path,l)):null}).filter(o=>!!o);return a.common.async?Promise.all(i).then(o=>T.mergeArray(t,o)):T.mergeArray(t,i)}get items(){return this._def.items}rest(e){return new L({...this._def,rest:e})}}L.create=(n,e)=>{if(!Array.isArray(n))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new L({items:n,typeName:b.ZodTuple,rest:null,...v(e)})};class ke extends w{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:a}=this._processInputParams(e);if(a.parsedType!==f.object)return p(a,{code:c.invalid_type,expected:f.object,received:a.parsedType}),g;const s=[],i=this._def.keyType,o=this._def.valueType;for(const l in a.data)s.push({key:i._parse(new U(a,l,a.path,l)),value:o._parse(new U(a,a.data[l],a.path,l)),alwaysSet:l in a.data});return a.common.async?T.mergeObjectAsync(t,s):T.mergeObjectSync(t,s)}get element(){return this._def.valueType}static create(e,t,a){return t instanceof w?new ke({keyType:e,valueType:t,typeName:b.ZodRecord,...v(a)}):new ke({keyType:I.create(),valueType:e,typeName:b.ZodRecord,...v(t)})}}class $e extends w{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:a}=this._processInputParams(e);if(a.parsedType!==f.map)return p(a,{code:c.invalid_type,expected:f.map,received:a.parsedType}),g;const s=this._def.keyType,i=this._def.valueType,o=[...a.data.entries()].map(([l,d],h)=>({key:s._parse(new U(a,l,a.path,[h,"key"])),value:i._parse(new U(a,d,a.path,[h,"value"]))}));if(a.common.async){const l=new Map;return Promise.resolve().then(async()=>{for(const d of o){const h=await d.key,y=await d.value;if(h.status==="aborted"||y.status==="aborted")return g;(h.status==="dirty"||y.status==="dirty")&&t.dirty(),l.set(h.value,y.value)}return{status:t.value,value:l}})}else{const l=new Map;for(const d of o){const h=d.key,y=d.value;if(h.status==="aborted"||y.status==="aborted")return g;(h.status==="dirty"||y.status==="dirty")&&t.dirty(),l.set(h.value,y.value)}return{status:t.value,value:l}}}}$e.create=(n,e,t)=>new $e({valueType:e,keyType:n,typeName:b.ZodMap,...v(t)});class K extends w{_parse(e){const{status:t,ctx:a}=this._processInputParams(e);if(a.parsedType!==f.set)return p(a,{code:c.invalid_type,expected:f.set,received:a.parsedType}),g;const s=this._def;s.minSize!==null&&a.data.size<s.minSize.value&&(p(a,{code:c.too_small,minimum:s.minSize.value,type:"set",inclusive:!0,exact:!1,message:s.minSize.message}),t.dirty()),s.maxSize!==null&&a.data.size>s.maxSize.value&&(p(a,{code:c.too_big,maximum:s.maxSize.value,type:"set",inclusive:!0,exact:!1,message:s.maxSize.message}),t.dirty());const i=this._def.valueType;function o(d){const h=new Set;for(const y of d){if(y.status==="aborted")return g;y.status==="dirty"&&t.dirty(),h.add(y.value)}return{status:t.value,value:h}}const l=[...a.data.values()].map((d,h)=>i._parse(new U(a,d,a.path,h)));return a.common.async?Promise.all(l).then(d=>o(d)):o(l)}min(e,t){return new K({...this._def,minSize:{value:e,message:m.toString(t)}})}max(e,t){return new K({...this._def,maxSize:{value:e,message:m.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}K.create=(n,e)=>new K({valueType:n,minSize:null,maxSize:null,typeName:b.ZodSet,...v(e)});class te extends w{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==f.function)return p(t,{code:c.invalid_type,expected:f.function,received:t.parsedType}),g;function a(l,d){return Ve({data:l,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,Ne(),ne].filter(h=>!!h),issueData:{code:c.invalid_arguments,argumentsError:d}})}function s(l,d){return Ve({data:l,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,Ne(),ne].filter(h=>!!h),issueData:{code:c.invalid_return_type,returnTypeError:d}})}const i={errorMap:t.common.contextualErrorMap},o=t.data;if(this._def.returns instanceof se){const l=this;return A(async function(...d){const h=new M([]),y=await l._def.args.parseAsync(d,i).catch(Ge=>{throw h.addIssue(a(d,Ge)),h}),C=await Reflect.apply(o,this,y);return await l._def.returns._def.type.parseAsync(C,i).catch(Ge=>{throw h.addIssue(s(C,Ge)),h})})}else{const l=this;return A(function(...d){const h=l._def.args.safeParse(d,i);if(!h.success)throw new M([a(d,h.error)]);const y=Reflect.apply(o,this,h.data),C=l._def.returns.safeParse(y,i);if(!C.success)throw new M([s(y,C.error)]);return C.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new te({...this._def,args:L.create(e).rest(H.create())})}returns(e){return new te({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,t,a){return new te({args:e||L.create([]).rest(H.create()),returns:t||H.create(),typeName:b.ZodFunction,...v(a)})}}class xe extends w{get schema(){return this._def.getter()}_parse(e){const{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}xe.create=(n,e)=>new xe({getter:n,typeName:b.ZodLazy,...v(e)});class Ee extends w{_parse(e){if(e.data!==this._def.value){const t=this._getOrReturnCtx(e);return p(t,{received:t.data,code:c.invalid_literal,expected:this._def.value}),g}return{status:"valid",value:e.data}}get value(){return this._def.value}}Ee.create=(n,e)=>new Ee({value:n,typeName:b.ZodLiteral,...v(e)});function yr(n,e){return new $({values:n,typeName:b.ZodEnum,...v(e)})}class $ extends w{constructor(){super(...arguments),de.set(this,void 0)}_parse(e){if(typeof e.data!="string"){const t=this._getOrReturnCtx(e),a=this._def.values;return p(t,{expected:k.joinValues(a),received:t.parsedType,code:c.invalid_type}),g}if(Be(this,de,"f")||hr(this,de,new Set(this._def.values),"f"),!Be(this,de,"f").has(e.data)){const t=this._getOrReturnCtx(e),a=this._def.values;return p(t,{received:t.data,code:c.invalid_enum_value,options:a}),g}return A(e.data)}get options(){return this._def.values}get enum(){const e={};for(const t of this._def.values)e[t]=t;return e}get Values(){const e={};for(const t of this._def.values)e[t]=t;return e}get Enum(){const e={};for(const t of this._def.values)e[t]=t;return e}extract(e,t=this._def){return $.create(e,{...this._def,...t})}exclude(e,t=this._def){return $.create(this.options.filter(a=>!e.includes(a)),{...this._def,...t})}}de=new WeakMap;$.create=yr;class Se extends w{constructor(){super(...arguments),ue.set(this,void 0)}_parse(e){const t=k.getValidEnumValues(this._def.values),a=this._getOrReturnCtx(e);if(a.parsedType!==f.string&&a.parsedType!==f.number){const s=k.objectValues(t);return p(a,{expected:k.joinValues(s),received:a.parsedType,code:c.invalid_type}),g}if(Be(this,ue,"f")||hr(this,ue,new Set(k.getValidEnumValues(this._def.values)),"f"),!Be(this,ue,"f").has(e.data)){const s=k.objectValues(t);return p(a,{received:a.data,code:c.invalid_enum_value,options:s}),g}return A(e.data)}get enum(){return this._def.values}}ue=new WeakMap;Se.create=(n,e)=>new Se({values:n,typeName:b.ZodNativeEnum,...v(e)});class se extends w{unwrap(){return this._def.type}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==f.promise&&t.common.async===!1)return p(t,{code:c.invalid_type,expected:f.promise,received:t.parsedType}),g;const a=t.parsedType===f.promise?t.data:Promise.resolve(t.data);return A(a.then(s=>this._def.type.parseAsync(s,{path:t.path,errorMap:t.common.contextualErrorMap})))}}se.create=(n,e)=>new se({type:n,typeName:b.ZodPromise,...v(e)});class R extends w{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===b.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:t,ctx:a}=this._processInputParams(e),s=this._def.effect||null,i={addIssue:o=>{p(a,o),o.fatal?t.abort():t.dirty()},get path(){return a.path}};if(i.addIssue=i.addIssue.bind(i),s.type==="preprocess"){const o=s.transform(a.data,i);if(a.common.async)return Promise.resolve(o).then(async l=>{if(t.value==="aborted")return g;const d=await this._def.schema._parseAsync({data:l,path:a.path,parent:a});return d.status==="aborted"?g:d.status==="dirty"||t.value==="dirty"?Q(d.value):d});{if(t.value==="aborted")return g;const l=this._def.schema._parseSync({data:o,path:a.path,parent:a});return l.status==="aborted"?g:l.status==="dirty"||t.value==="dirty"?Q(l.value):l}}if(s.type==="refinement"){const o=l=>{const d=s.refinement(l,i);if(a.common.async)return Promise.resolve(d);if(d instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return l};if(a.common.async===!1){const l=this._def.schema._parseSync({data:a.data,path:a.path,parent:a});return l.status==="aborted"?g:(l.status==="dirty"&&t.dirty(),o(l.value),{status:t.value,value:l.value})}else return this._def.schema._parseAsync({data:a.data,path:a.path,parent:a}).then(l=>l.status==="aborted"?g:(l.status==="dirty"&&t.dirty(),o(l.value).then(()=>({status:t.value,value:l.value}))))}if(s.type==="transform")if(a.common.async===!1){const o=this._def.schema._parseSync({data:a.data,path:a.path,parent:a});if(!me(o))return o;const l=s.transform(o.value,i);if(l instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:l}}else return this._def.schema._parseAsync({data:a.data,path:a.path,parent:a}).then(o=>me(o)?Promise.resolve(s.transform(o.value,i)).then(l=>({status:t.value,value:l})):o);k.assertNever(s)}}R.create=(n,e,t)=>new R({schema:n,typeName:b.ZodEffects,effect:e,...v(t)});R.createWithPreprocess=(n,e,t)=>new R({schema:e,effect:{type:"preprocess",transform:n},typeName:b.ZodEffects,...v(t)});class Z extends w{_parse(e){return this._getType(e)===f.undefined?A(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Z.create=(n,e)=>new Z({innerType:n,typeName:b.ZodOptional,...v(e)});class q extends w{_parse(e){return this._getType(e)===f.null?A(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}q.create=(n,e)=>new q({innerType:n,typeName:b.ZodNullable,...v(e)});class je extends w{_parse(e){const{ctx:t}=this._processInputParams(e);let a=t.data;return t.parsedType===f.undefined&&(a=this._def.defaultValue()),this._def.innerType._parse({data:a,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}je.create=(n,e)=>new je({innerType:n,typeName:b.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...v(e)});class Pe extends w{_parse(e){const{ctx:t}=this._processInputParams(e),a={...t,common:{...t.common,issues:[]}},s=this._def.innerType._parse({data:a.data,path:a.path,parent:{...a}});return ye(s)?s.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new M(a.common.issues)},input:a.data})})):{status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new M(a.common.issues)},input:a.data})}}removeCatch(){return this._def.innerType}}Pe.create=(n,e)=>new Pe({innerType:n,typeName:b.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...v(e)});class qe extends w{_parse(e){if(this._getType(e)!==f.nan){const a=this._getOrReturnCtx(e);return p(a,{code:c.invalid_type,expected:f.nan,received:a.parsedType}),g}return{status:"valid",value:e.data}}}qe.create=n=>new qe({typeName:b.ZodNaN,...v(n)});const nn=Symbol("zod_brand");class At extends w{_parse(e){const{ctx:t}=this._processInputParams(e),a=t.data;return this._def.type._parse({data:a,path:t.path,parent:t})}unwrap(){return this._def.type}}class Ae extends w{_parse(e){const{status:t,ctx:a}=this._processInputParams(e);if(a.common.async)return(async()=>{const i=await this._def.in._parseAsync({data:a.data,path:a.path,parent:a});return i.status==="aborted"?g:i.status==="dirty"?(t.dirty(),Q(i.value)):this._def.out._parseAsync({data:i.value,path:a.path,parent:a})})();{const s=this._def.in._parseSync({data:a.data,path:a.path,parent:a});return s.status==="aborted"?g:s.status==="dirty"?(t.dirty(),{status:"dirty",value:s.value}):this._def.out._parseSync({data:s.value,path:a.path,parent:a})}}static create(e,t){return new Ae({in:e,out:t,typeName:b.ZodPipeline})}}class Ce extends w{_parse(e){const t=this._def.innerType._parse(e),a=s=>(me(s)&&(s.value=Object.freeze(s.value)),s);return ye(t)?t.then(s=>a(s)):a(t)}unwrap(){return this._def.innerType}}Ce.create=(n,e)=>new Ce({innerType:n,typeName:b.ZodReadonly,...v(e)});function br(n,e={},t){return n?ae.create().superRefine((a,s)=>{var i,o;if(!n(a)){const l=typeof e=="function"?e(a):typeof e=="string"?{message:e}:e,d=(o=(i=l.fatal)!==null&&i!==void 0?i:t)!==null&&o!==void 0?o:!0,h=typeof l=="string"?{message:l}:l;s.addIssue({code:"custom",...h,fatal:d})}}):ae.create()}const an={object:S.lazycreate};var b;(function(n){n.ZodString="ZodString",n.ZodNumber="ZodNumber",n.ZodNaN="ZodNaN",n.ZodBigInt="ZodBigInt",n.ZodBoolean="ZodBoolean",n.ZodDate="ZodDate",n.ZodSymbol="ZodSymbol",n.ZodUndefined="ZodUndefined",n.ZodNull="ZodNull",n.ZodAny="ZodAny",n.ZodUnknown="ZodUnknown",n.ZodNever="ZodNever",n.ZodVoid="ZodVoid",n.ZodArray="ZodArray",n.ZodObject="ZodObject",n.ZodUnion="ZodUnion",n.ZodDiscriminatedUnion="ZodDiscriminatedUnion",n.ZodIntersection="ZodIntersection",n.ZodTuple="ZodTuple",n.ZodRecord="ZodRecord",n.ZodMap="ZodMap",n.ZodSet="ZodSet",n.ZodFunction="ZodFunction",n.ZodLazy="ZodLazy",n.ZodLiteral="ZodLiteral",n.ZodEnum="ZodEnum",n.ZodEffects="ZodEffects",n.ZodNativeEnum="ZodNativeEnum",n.ZodOptional="ZodOptional",n.ZodNullable="ZodNullable",n.ZodDefault="ZodDefault",n.ZodCatch="ZodCatch",n.ZodPromise="ZodPromise",n.ZodBranded="ZodBranded",n.ZodPipeline="ZodPipeline",n.ZodReadonly="ZodReadonly"})(b||(b={}));const sn=(n,e={message:`Input not instance of ${n.name}`})=>br(t=>t instanceof n,e),gr=I.create,vr=z.create,on=qe.create,ln=D.create,_r=be.create,cn=J.create,dn=ze.create,un=ge.create,hn=ve.create,pn=ae.create,fn=H.create,mn=HELL.create,yn=De.create,bn=W.create,gn=S.create,vn=S.strictCreate,_n=_e.create,wn=Fe.create,kn=we.create,xn=L.create,En=ke.create,Sn=$e.create,jn=K.create,Pn=te.create,Cn=xe.create,Tn=Ee.create,An=$.create,Mn=Se.create,In=se.create,Ot=R.create,Wn=Z.create,Rn=q.create,On=R.createWithPreprocess,Zn=Ae.create,Un=()=>gr().optional(),Ln=()=>vr().optional(),Nn=()=>_r().optional(),Vn={string:n=>I.create({...n,coerce:!0}),number:n=>z.create({...n,coerce:!0}),boolean:n=>be.create({...n,coerce:!0}),bigint:n=>D.create({...n,coerce:!0}),date:n=>J.create({...n,coerce:!0})},Bn=g;var r=Object.freeze({__proto__:null,defaultErrorMap:ne,setErrorMap:Vr,getErrorMap:Ne,makeIssue:Ve,EMPTY_PATH:Br,addIssueToContext:p,ParseStatus:T,INVALID:g,DIRTY:Q,OK:A,isAborted:ft,isDirty:mt,isValid:me,isAsync:ye,get util(){return k},get objectUtil(){return pt},ZodParsedType:f,getParsedType:B,ZodType:w,datetimeRegex:mr,ZodString:I,ZodNumber:z,ZodBigInt:D,ZodBoolean:be,ZodDate:J,ZodSymbol:ze,ZodUndefined:ge,ZodNull:ve,ZodAny:ae,ZodUnknown:H,ZodNever:HELL,ZodVoid:De,ZodArray:W,ZodObject:S,ZodUnion:_e,ZodDiscriminatedUnion:Fe,ZodIntersection:we,ZodTuple:L,ZodRecord:ke,ZodMap:$e,ZodSet:K,ZodFunction:te,ZodLazy:xe,ZodLiteral:Ee,ZodEnum:$,ZodNativeEnum:Se,ZodPromise:se,ZodEffects:R,ZodTransformer:R,ZodOptional:Z,ZodNullable:q,ZodDefault:je,ZodCatch:Pe,ZodNaN:qe,BRAND:nn,ZodBranded:At,ZodPipeline:Ae,ZodReadonly:Ce,custom:br,Schema:w,ZodSchema:w,late:an,get ZodFirstPartyTypeKind(){return b},coerce:Vn,any:pn,array:bn,bigint:ln,boolean:_r,date:cn,discriminatedUnion:wn,effect:Ot,enum:An,function:Pn,instanceof:sn,intersection:kn,lazy:Cn,literal:Tn,map:Sn,nan:on,nativeEnum:Mn,never:mn,null:hn,nullable:Rn,number:vr,object:gn,oboolean:Nn,onumber:Ln,optional:Wn,ostring:Un,pipeline:Zn,preprocess:On,promise:In,record:En,set:jn,strictObject:vn,string:gr,symbol:dn,transformer:Ot,tuple:xn,undefined:un,union:_n,unknown:fn,void:yn,NEVER:Bn,ZodIssueCode:c,quotelessJson:Nr,ZodError:M});const zn=r.object({access_code:r.string().optional().nullable(),url:r.string(),author:r.object({firstname:r.string().nullable(),lastname:r.string().nullable()}).optional().nullable(),imageUrl:r.string().optional().nullable(),lang:r.string().optional().nullable(),title:r.string().optional().nullable(),type:r.string().optional().nullable()}),Dn="activity-picker-result";r.union([r.literal("true"),r.literal("false"),r.literal("0"),r.literal("1"),r.literal("")]);r.string().regex(/^\d*$/,{message:"Must be a positive integer number"});r.string().url().or(r.string().startsWith("/")).or(r.literal(""));const $n=r.object({scope:r.literal("local"),author:r.string().optional()}),qn=r.object({scope:r.literal("bubble")}),Yn=r.union([$n,qn]),Hn=r.object({message:r.string(),options:Yn}),Jn=r.object({name:r.string(),active:r.boolean(),isMe:r.boolean(),jid:r.string(),isMember:r.boolean(),color:r.string().optional()});var Ye=(n=>(n[n.text=1]="text",n[n.me=2]="me",n[n.userIncoming=3]="userIncoming",n[n.userOutcoming=4]="userOutcoming",n[n.userWriting=5]="userWriting",n[n.userStopWriting=6]="userStopWriting",n))(Ye||{});const Kn=r.nativeEnum(Ye),Zt=r.object({id:r.optional(r.string()),type:Kn,date:r.date(),author:r.optional(r.nullable(Jn)),name:r.optional(r.nullable(r.string())),targets:r.optional(r.nullable(r.array(r.nullable(r.string())))),text:r.optional(r.nullable(r.array(r.string())))}),wr=r.object({uuid:r.string(),name:r.string()}),Fn=r.object({author:r.string().optional()}),Gn=r.object({author:r.string().optional()}),Xn=r.object({users:r.array(r.object({jid:r.string().optional(),name:r.string().optional()}))}),Qn=r.object({popupId:r.number()}),ea=r.object({url:r.string()}),ta=r.object({url:r.string()}),ra=r.object({url:r.string(),allowApi:r.boolean().optional(),allowPolicy:r.optional(r.string()),widthPercent:r.optional(r.number()),position:r.optional(r.number()),closable:r.boolean().optional(),lazy:r.boolean().optional()}),Ut=r.object({id:r.string()}),na=r.object({label:r.string(),className:r.optional(r.string())}),aa=r.object({popupId:r.number(),targetObject:r.string(),message:r.string(),buttons:r.array(na)}),sa=r.object({url:r.string()}),Lt=r.object({name:r.string()}),ia=r.object({layerName:r.string(),propertyName:r.string(),propertyValue:r.optional(r.union([r.string(),r.number(),r.boolean()]))}),oa=r.object({url:r.string()}),la=r.object({volume:r.optional(r.number()),loop:r.boolean().optional(),mute:r.boolean().optional(),rate:r.optional(r.number()),detune:r.optional(r.number()),seek:r.optional(r.number()),delay:r.optional(r.number())}),ca=r.object({url:r.string(),config:r.optional(la)}),da=r.object({url:r.string()}),ua=r.array(r.object({x:r.number(),y:r.number(),tile:r.union([r.number(),r.string(),r.null()]),layer:r.string()})),ha=r.object({roomId:r.string(),hashParameters:r.record(r.string(),r.string()),mapUrl:r.string(),nickname:r.string(),language:r.string().optional(),playerId:r.number().optional(),uuid:r.string().optional(),startLayerName:r.string().optional(),tags:r.string().array(),variables:r.unknown(),playerVariables:r.unknown(),userRoomToken:r.string().optional(),metadata:r.unknown().optional(),iframeId:r.string().optional(),isLogged:r.boolean().optional().default(!1)}),pa=r.object({data:r.unknown()}),He=r.object({key:r.string(),value:r.unknown()});r.object({type:r.literal("setVariable"),data:He});const fa=r.object({x:r.number(),y:r.number(),width:r.number(),height:r.number()}),ma=r.object({name:r.string(),url:r.optional(r.string()),visible:r.boolean().optional(),allowApi:r.boolean().optional(),allow:r.optional(r.string()),x:r.optional(r.number()),y:r.optional(r.number()),width:r.optional(r.number()),height:r.optional(r.number()),origin:r.optional(r.enum(["player","map"])),scale:r.optional(r.number())}),Nt=r.object({name:r.string(),url:r.string(),position:fa,visible:r.boolean().optional(),allowApi:r.boolean().optional(),allow:r.optional(r.string()),origin:r.optional(r.enum(["player","map"])),scale:r.optional(r.number())}),ya=r.object({url:r.string()}),ba="triggerActionMessage",ga="removeActionMessage",va=r.enum(["message","warning"]),Vt=r.object({message:r.string(),uuid:r.string(),type:va}),bt=r.object({uuid:r.string()}),_a=r.object({key:r.string()}),wa=r.object({allowApi:r.boolean(),allow:r.string().optional()}),ka=r.object({name:r.string(),iframe:r.optional(r.string()),key:r.string(),options:wa}),xa=r.object({key:r.string()}),kr=r.object({x:r.number(),y:r.number()}),Ea=r.object({x:r.number(),y:r.number(),width:r.optional(r.number()),height:r.optional(r.number()),lock:r.boolean(),smooth:r.boolean(),duration:r.optional(r.number())}),Sa=r.object({smooth:r.boolean(),duration:r.optional(r.number())}),ja=r.object({red:r.number(),green:r.number(),blue:r.number()}),Pa=r.object({x:r.number(),y:r.number(),speed:r.optional(r.number())}),Ca=r.object({x:r.number(),y:r.number(),cancelled:r.boolean()}),Ta=r.object({id:r.number(),actionKey:r.string()}),Aa=r.object({id:r.number(),actionKey:r.string()}),Ma=r.object({areaName:r.string(),propertyName:r.string(),propertyValue:r.optional(r.union([r.string(),r.number(),r.boolean()]))}),Ia=/-*\d+(px|em|%|cm|in|pc|pt|mm|ex|vw|vh|rem)|auto|inherit/,ee=r.string().regex(Ia),Mt=r.object({top:ee.optional(),bottom:ee.optional(),left:ee.optional(),right:ee.optional()}),Wa=r.enum(["top","middle","bottom"]),Ra=r.enum(["left","middle","right"]),It=r.object({vertical:Wa,horizontal:Ra}),Wt=r.object({height:ee,width:ee}),Oa=r.object({url:r.string(),visible:r.boolean().optional(),allowApi:r.boolean().optional(),allowPolicy:r.optional(r.string()),position:It,size:Wt,margin:Mt.partial().optional()}),Za=r.object({id:r.string(),url:r.string().optional(),visible:r.boolean().optional(),position:It.optional(),size:Wt.optional(),margin:Mt.partial().optional()}),Qe=r.object({id:r.string(),url:r.string(),visible:r.boolean(),allowApi:r.boolean(),allowPolicy:r.string(),position:It,size:Wt,margin:Mt.partial().optional()}),xr=r.object({name:r.string(),x:r.optional(r.number()),y:r.optional(r.number()),width:r.optional(r.number()),height:r.optional(r.number())}),Bt=r.object({name:r.string(),x:r.number(),y:r.number(),width:r.number(),height:r.number()}),Ua=r.object({message:r.string(),senderId:r.string().optional().describe("The id of the sender of the message. If not provided, the message is sent by the current user.")}),zt=r.object({name:r.string()}),Dt=r.object({name:r.string()}),Me=r.object({name:r.string()}),La=r.object({popupId:r.number(),buttonId:r.number()}),Na=r.object({id:r.number(),actionName:r.string()}),Va=r.object({direction:r.enum(["right","left","up","down"]),moving:r.boolean(),x:r.number(),y:r.number(),oldX:r.optional(r.number()),oldY:r.optional(r.number())}),Ba=r.object({x:r.number(),y:r.number(),width:r.number(),height:r.number(),zoom:r.number()}),za=r.object({uuid:r.string(),playUri:r.string()}),Da=r.object({url:r.string()}),$a=r.object({url:r.string(),name:r.string(),type:r.string(),subscribe:r.boolean()}),qa=r.object({menuItem:r.string()}),ie=r.object({playerId:r.number(),name:r.string(),userUuid:r.string(),availabilityStatus:r.string(),outlineColor:r.number().optional(),position:kr,variables:r.map(r.string(),r.unknown()),chatID:r.string().optional().nullable()}),Ya=ie.omit({userUuid:!0}).partial({name:!0,availabilityStatus:!0,outlineColor:!0,position:!0,variables:!0}),Ha=r.object({users:ie.array()}),Ie=r.object({user:ie}),Ja=r.object({key:r.string(),value:r.unknown(),playerId:r.number()}),Ka=r.object({players:r.boolean(),movement:r.boolean()}),Fa=r.object({key:r.string(),value:r.unknown(),public:r.boolean(),persist:r.boolean(),ttl:r.number().optional(),scope:r.union([r.literal("room"),r.literal("world")])}),Ga=r.object({notification:r.boolean(),chatSounds:r.boolean(),enableChat:r.boolean(),enableChatUpload:r.boolean(),enableChatOnlineList:r.boolean(),enableChatDisconnectedList:r.boolean()}),Xa=r.object({visibility:r.boolean()}),Qa=r.object({visitCardUrl:r.string()}),Er=r.object({src:r.string(),allow:r.string().optional().nullable().default(null),title:r.string().optional().default("WorkAdventure modal iframe"),position:r.enum(["right","left","center"]).optional().default("right"),allowApi:r.boolean().optional().default(!1)}),Sr=r.object({id:r.string(),label:r.string(),type:r.enum(["button"]).optional().default("button")}),jr=r.object({id:r.string(),type:r.enum(["action"]),imageSrc:r.string(),toolTip:r.string()}),Pr=r.union([Sr,jr]),es=r.object({id:r.string()}),ts=r.object({id:r.string(),text:r.string(),bgColor:r.string().optional(),textColor:r.string().optional(),closable:r.boolean().default(!0).optional(),timeToClose:r.number().default(12e4).optional(),link:r.object({url:r.string(),label:r.string()}).optional()}),rs=r.object({x:r.number(),y:r.number()}),Cr=r.object({name:r.string(),data:r.unknown(),targetUserIds:r.array(r.number()).optional()});r.object({type:r.literal("dispatchEvent"),data:Cr});const Tr=r.object({name:r.string(),data:r.unknown(),senderId:r.number().optional()});r.object({type:r.literal("receiveEvent"),data:Tr});const ns=r.object({url:r.string()}),Ar=r.object({sampleRate:r.number()}),Mr=r.object({data:r.instanceof(Float32Array)}),as=r.object({data:r.unknown()});r.union([r.object({type:r.literal("addActionsMenuKeyToRemotePlayer"),data:Ta}),r.object({type:r.literal("removeActionsMenuKeyFromRemotePlayer"),data:Aa}),r.object({type:r.literal("loadPage"),data:ta}),r.object({type:r.literal("chat"),data:Hn}),r.object({type:r.literal("startWriting"),data:Fn}),r.object({type:r.literal("stopWriting"),data:Gn}),r.object({type:r.literal("openChat"),data:r.undefined()}),r.object({type:r.literal("closeChat"),data:r.undefined()}),r.object({type:r.literal("addPersonnalMessage"),data:r.string()}),r.object({type:r.literal("newChatMessageWritingStatus"),data:r.number()}),r.object({type:r.literal("cameraFollowPlayer"),data:Sa}),r.object({type:r.literal("cameraSet"),data:Ea}),r.object({type:r.literal("openPopup"),data:aa}),r.object({type:r.literal("closePopup"),data:Qn}),r.object({type:r.literal("openTab"),data:sa}),r.object({type:r.literal("goToPage"),data:ea}),r.object({type:r.literal("turnOffMicrophone"),data:r.undefined()}),r.object({type:r.literal("turnOffWebcam"),data:r.undefined()}),r.object({type:r.literal("disableMicrophone"),data:r.undefined()}),r.object({type:r.literal("restoreMicrophone"),data:r.undefined()}),r.object({type:r.literal("disableWebcam"),data:r.undefined()}),r.object({type:r.literal("restoreWebcam"),data:r.undefined()}),r.object({type:r.literal("disablePlayerControls"),data:r.undefined()}),r.object({type:r.literal("restorePlayerControls"),data:r.undefined()}),r.object({type:r.literal("disablePlayerProximityMeeting"),data:r.undefined()}),r.object({type:r.literal("restorePlayerProximityMeeting"),data:r.undefined()}),r.object({type:r.literal("displayBubble"),data:r.undefined()}),r.object({type:r.literal("removeBubble"),data:r.undefined()}),r.object({type:r.literal("onPlayerMove"),data:r.undefined()}),r.object({type:r.literal("onCameraUpdate"),data:r.undefined()}),r.object({type:r.literal("showLayer"),data:Lt}),r.object({type:r.literal("hideLayer"),data:Lt}),r.object({type:r.literal("setProperty"),data:ia}),r.object({type:r.literal("setAreaProperty"),data:Ma}),r.object({type:r.literal("loadSound"),data:oa}),r.object({type:r.literal("playSound"),data:ca}),r.object({type:r.literal("stopSound"),data:da}),r.object({type:r.literal("registerMenu"),data:ka}),r.object({type:r.literal("unregisterMenu"),data:_a}),r.object({type:r.literal("openMenu"),data:xa}),r.object({type:r.literal("setTiles"),data:ua}),r.object({type:r.literal("modifyEmbeddedWebsite"),data:ma}),r.object({type:r.literal("modifyUIWebsite"),data:Za}),r.object({type:r.literal("modifyArea"),data:xr}),r.object({type:r.literal("askPosition"),data:za}),r.object({type:r.literal("openInviteMenu"),data:r.undefined()}),r.object({type:r.literal("login"),data:r.undefined()}),r.object({type:r.literal("refresh"),data:r.undefined()}),r.object({type:r.literal("showBusinessCard"),data:Qa}),r.object({type:r.literal("openModal"),data:Er}),r.object({type:r.literal("closeModal"),data:r.undefined()}),r.object({type:r.literal("redirectPricing"),data:r.undefined()}),r.object({type:r.literal("addButtonActionBar"),data:Pr}),r.object({type:r.literal("removeButtonActionBar"),data:es}),r.object({type:r.literal("openBanner"),data:ts}),r.object({type:r.literal("closeBanner"),data:r.undefined()}),r.object({type:r.literal(Dn),payload:zn}),r.object({type:r.literal("banUser"),data:wr}),r.object({type:r.literal("disableMapEditor"),data:r.undefined()}),r.object({type:r.literal("restoreMapEditor"),data:r.undefined()}),r.object({type:r.literal("disableScreenSharing"),data:r.undefined()}),r.object({type:r.literal("restoreScreenSharing"),data:r.undefined()}),r.object({type:r.literal("disableRightClick"),data:r.undefined()}),r.object({type:r.literal("restoreRightClick"),data:r.undefined()}),r.object({type:r.literal("disableWheelZoom"),data:r.undefined()}),r.object({type:r.literal("restoreWheelZoom"),data:r.undefined()}),r.object({type:r.literal("disableInviteUserButton"),data:r.undefined()}),r.object({type:r.literal("restoreInviteUserButton"),data:r.undefined()}),r.object({type:r.literal("disableRoomList"),data:r.undefined()}),r.object({type:r.literal("restoreRoomList"),data:r.undefined()}),r.object({type:r.literal("startListeningToStreamInBubble"),data:Ar}),r.object({type:r.literal("stopListeningToStreamInBubble"),data:r.undefined()})]);const ss=r.union([r.object({type:r.literal("userInputChat"),data:Ua}),r.object({type:r.literal("joinProximityMeetingEvent"),data:Ha}),r.object({type:r.literal("participantJoinProximityMeetingEvent"),data:Ie}),r.object({type:r.literal("participantLeaveProximityMeetingEvent"),data:Ie}),r.object({type:r.literal("leaveProximityMeetingEvent"),data:r.undefined()}),r.object({type:r.literal("onFollowed"),data:Ie}),r.object({type:r.literal("onUnfollowed"),data:Ie}),r.object({type:r.literal("enterEvent"),data:zt}),r.object({type:r.literal("leaveEvent"),data:zt}),r.object({type:r.literal("enterMapEditorAreaEvent"),data:Me}),r.object({type:r.literal("leaveMapEditorAreaEvent"),data:Me}),r.object({type:r.literal("enterLayerEvent"),data:Dt}),r.object({type:r.literal("leaveLayerEvent"),data:Dt}),r.object({type:r.literal("enterAreaEvent"),data:Me}),r.object({type:r.literal("leaveAreaEvent"),data:Me}),r.object({type:r.literal("buttonClickedEvent"),data:La}),r.object({type:r.literal("remotePlayerClickedEvent"),data:ie}),r.object({type:r.literal("actionsMenuActionClickedEvent"),data:Na}),r.object({type:r.literal("hasPlayerMoved"),data:Va}),r.object({type:r.literal("wasCameraUpdated"),data:Ba}),r.object({type:r.literal("menuItemClicked"),data:qa}),r.object({type:r.literal("setVariable"),data:He}),r.object({type:r.literal("setPlayerVariable"),data:He}),r.object({type:r.literal("setSharedPlayerVariable"),data:Ja}),r.object({type:r.literal("receiveEvent"),data:Tr}),r.object({type:r.literal("messageTriggered"),data:bt}),r.object({type:r.literal("leaveMuc"),data:Da}),r.object({type:r.literal("joinMuc"),data:$a}),r.object({type:r.literal("addRemotePlayer"),data:ie}),r.object({type:r.literal("removeRemotePlayer"),data:r.number()}),r.object({type:r.literal("remotePlayerChanged"),data:Ya}),r.object({type:r.literal("settings"),data:Ga}),r.object({type:r.literal("chatVisibility"),data:Xa}),r.object({type:r.literal("availabilityStatus"),data:r.number()}),r.object({type:r.literal("peerConnectionStatus"),data:r.boolean()}),r.object({type:r.literal("comingUser"),data:Zt}),r.object({type:r.literal("addChatMessage"),data:Zt}),r.object({type:r.literal("updateWritingStatusChatList"),data:Xn}),r.object({type:r.literal("buttonActionBarTrigger"),data:Pr}),r.object({type:r.literal("modalCloseTrigger"),data:Er}),r.object({type:r.literal("banUser"),data:wr}),r.object({type:r.literal("appendPCMData"),data:Mr})]),is=r.object({type:r.string(),data:r.unknown().optional(),payload:r.unknown().optional()});r.undefined(),r.undefined(),r.undefined(),r.undefined(),r.undefined(),r.number(),r.undefined(),r.array(Ut),r.string(),r.undefined(),r.undefined(),r.undefined(),r.undefined(),r.undefined(),r.undefined(),r.undefined(),r.undefined(),r.undefined(),r.string(),r.string(),r.undefined(),r.undefined(),r.undefined(),r.string(),r.undefined(),r.string(),r.undefined(),r.undefined(),r.undefined(),r.undefined(),r.undefined(),r.undefined(),r.string(),r.undefined(),r.undefined(),r.array(Qe),r.string(),r.array(ie),r.undefined(),r.string(),r.undefined(),r.undefined(),r.undefined(),r.undefined(),r.undefined(),r.undefined(),r.undefined(),r.undefined(),r.undefined(),r.undefined(),r.undefined(),r.undefined();const os=n=>typeof n.type=="string"&&typeof n.id=="number",ls=r.object({id:r.number(),type:r.string(),error:r.string()});/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var gt=function(n,e){return gt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var s in a)a.hasOwnProperty(s)&&(t[s]=a[s])},gt(n,e)};function oe(n,e){gt(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}function vt(n){return typeof n=="function"}var $t=!1,O={Promise:void 0,set useDeprecatedSynchronousErrorHandling(n){if(n){var e=new Error;""+e.stack}$t=n},get useDeprecatedSynchronousErrorHandling(){return $t}};function he(n){setTimeout(function(){throw n},0)}var Je={closed:!0,next:function(n){},error:function(n){if(O.useDeprecatedSynchronousErrorHandling)throw n;he(n)},complete:function(){}},cs=function(){return Array.isArray||function(n){return n&&typeof n.length=="number"}}();function ds(n){return n!==null&&typeof n=="object"}var us=function(){function n(e){return Error.call(this),this.message=e?e.length+` errors occurred during unsubscription:
`+e.map(function(t,a){return a+1+") "+t.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=e,this}return n.prototype=Object.create(Error.prototype),n}(),Le=us,Te=function(){function n(e){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,e&&(this._ctorUnsubscribe=!0,this._unsubscribe=e)}return n.prototype.unsubscribe=function(){var e;if(!this.closed){var t=this,a=t._parentOrParents,s=t._ctorUnsubscribe,i=t._unsubscribe,o=t._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,a instanceof n)a.remove(this);else if(a!==null)for(var l=0;l<a.length;++l){var d=a[l];d.remove(this)}if(vt(i)){s&&(this._unsubscribe=void 0);try{i.call(this)}catch(C){e=C instanceof Le?qt(C.errors):[C]}}if(cs(o))for(var l=-1,h=o.length;++l<h;){var y=o[l];if(ds(y))try{y.unsubscribe()}catch(F){e=e||[],F instanceof Le?e=e.concat(qt(F.errors)):e.push(F)}}if(e)throw new Le(e)}},n.prototype.add=function(e){var t=e;if(!e)return n.EMPTY;switch(typeof e){case"function":t=new n(e);case"object":if(t===this||t.closed||typeof t.unsubscribe!="function")return t;if(this.closed)return t.unsubscribe(),t;if(!(t instanceof n)){var a=t;t=new n,t._subscriptions=[a]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}var s=t._parentOrParents;if(s===null)t._parentOrParents=this;else if(s instanceof n){if(s===this)return t;t._parentOrParents=[s,this]}else if(s.indexOf(this)===-1)s.push(this);else return t;var i=this._subscriptions;return i===null?this._subscriptions=[t]:i.push(t),t},n.prototype.remove=function(e){var t=this._subscriptions;if(t){var a=t.indexOf(e);a!==-1&&t.splice(a,1)}},n.EMPTY=function(e){return e.closed=!0,e}(new n),n}();function qt(n){return n.reduce(function(e,t){return e.concat(t instanceof Le?t.errors:t)},[])}var Ke=function(){return typeof Symbol=="function"?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()}(),re=function(n){oe(e,n);function e(t,a,s){var i=n.call(this)||this;switch(i.syncErrorValue=null,i.syncErrorThrown=!1,i.syncErrorThrowable=!1,i.isStopped=!1,arguments.length){case 0:i.destination=Je;break;case 1:if(!t){i.destination=Je;break}if(typeof t=="object"){t instanceof e?(i.syncErrorThrowable=t.syncErrorThrowable,i.destination=t,t.add(i)):(i.syncErrorThrowable=!0,i.destination=new Yt(i,t));break}default:i.syncErrorThrowable=!0,i.destination=new Yt(i,t,a,s);break}return i}return e.prototype[Ke]=function(){return this},e.create=function(t,a,s){var i=new e(t,a,s);return i.syncErrorThrowable=!1,i},e.prototype.next=function(t){this.isStopped||this._next(t)},e.prototype.error=function(t){this.isStopped||(this.isStopped=!0,this._error(t))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,n.prototype.unsubscribe.call(this))},e.prototype._next=function(t){this.destination.next(t)},e.prototype._error=function(t){this.destination.error(t),this.unsubscribe()},e.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},e.prototype._unsubscribeAndRecycle=function(){var t=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=t,this},e}(Te),Yt=function(n){oe(e,n);function e(t,a,s,i){var o=n.call(this)||this;o._parentSubscriber=t;var l,d=o;return vt(a)?l=a:a&&(l=a.next,s=a.error,i=a.complete,a!==Je&&(d=Object.create(a),vt(d.unsubscribe)&&o.add(d.unsubscribe.bind(d)),d.unsubscribe=o.unsubscribe.bind(o))),o._context=d,o._next=l,o._error=s,o._complete=i,o}return e.prototype.next=function(t){if(!this.isStopped&&this._next){var a=this._parentSubscriber;!O.useDeprecatedSynchronousErrorHandling||!a.syncErrorThrowable?this.__tryOrUnsub(this._next,t):this.__tryOrSetError(a,this._next,t)&&this.unsubscribe()}},e.prototype.error=function(t){if(!this.isStopped){var a=this._parentSubscriber,s=O.useDeprecatedSynchronousErrorHandling;if(this._error)!s||!a.syncErrorThrowable?(this.__tryOrUnsub(this._error,t),this.unsubscribe()):(this.__tryOrSetError(a,this._error,t),this.unsubscribe());else if(a.syncErrorThrowable)s?(a.syncErrorValue=t,a.syncErrorThrown=!0):he(t),this.unsubscribe();else{if(this.unsubscribe(),s)throw t;he(t)}}},e.prototype.complete=function(){var t=this;if(!this.isStopped){var a=this._parentSubscriber;if(this._complete){var s=function(){return t._complete.call(t._context)};!O.useDeprecatedSynchronousErrorHandling||!a.syncErrorThrowable?(this.__tryOrUnsub(s),this.unsubscribe()):(this.__tryOrSetError(a,s),this.unsubscribe())}else this.unsubscribe()}},e.prototype.__tryOrUnsub=function(t,a){try{t.call(this._context,a)}catch(s){if(this.unsubscribe(),O.useDeprecatedSynchronousErrorHandling)throw s;he(s)}},e.prototype.__tryOrSetError=function(t,a,s){if(!O.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{a.call(this._context,s)}catch(i){return O.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=i,t.syncErrorThrown=!0,!0):(he(i),!0)}return!1},e.prototype._unsubscribe=function(){var t=this._parentSubscriber;this._context=null,this._parentSubscriber=null,t.unsubscribe()},e}(re);function hs(n){for(;n;){var e=n,t=e.closed,a=e.destination,s=e.isStopped;if(t||s)return!1;a&&a instanceof re?n=a:n=null}return!0}function ps(n,e,t){if(n){if(n instanceof re)return n;if(n[Ke])return n[Ke]()}return!n&&!e&&!t?new re(Je):new re(n,e,t)}var fs=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();function ms(n){return n}function ys(n){return n.length===0?ms:n.length===1?n[0]:function(t){return n.reduce(function(a,s){return s(a)},t)}}var _t=function(){function n(e){this._isScalar=!1,e&&(this._subscribe=e)}return n.prototype.lift=function(e){var t=new n;return t.source=this,t.operator=e,t},n.prototype.subscribe=function(e,t,a){var s=this.operator,i=ps(e,t,a);if(s?i.add(s.call(i,this.source)):i.add(this.source||O.useDeprecatedSynchronousErrorHandling&&!i.syncErrorThrowable?this._subscribe(i):this._trySubscribe(i)),O.useDeprecatedSynchronousErrorHandling&&i.syncErrorThrowable&&(i.syncErrorThrowable=!1,i.syncErrorThrown))throw i.syncErrorValue;return i},n.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){O.useDeprecatedSynchronousErrorHandling&&(e.syncErrorThrown=!0,e.syncErrorValue=t),hs(e)?e.error(t):console.warn(t)}},n.prototype.forEach=function(e,t){var a=this;return t=Ht(t),new t(function(s,i){var o;o=a.subscribe(function(l){try{e(l)}catch(d){i(d),o&&o.unsubscribe()}},i,s)})},n.prototype._subscribe=function(e){var t=this.source;return t&&t.subscribe(e)},n.prototype[fs]=function(){return this},n.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.length===0?this:ys(e)(this)},n.prototype.toPromise=function(e){var t=this;return e=Ht(e),new e(function(a,s){var i;t.subscribe(function(o){return i=o},function(o){return s(o)},function(){return a(i)})})},n.create=function(e){return new n(e)},n}();function Ht(n){if(n||(n=Promise),!n)throw new Error("no Promise impl found");return n}var bs=function(){function n(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return n.prototype=Object.create(Error.prototype),n}(),le=bs,gs=function(n){oe(e,n);function e(t,a){var s=n.call(this)||this;return s.subject=t,s.subscriber=a,s.closed=!1,s}return e.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var t=this.subject,a=t.observers;if(this.subject=null,!(!a||a.length===0||t.isStopped||t.closed)){var s=a.indexOf(this.subscriber);s!==-1&&a.splice(s,1)}}},e}(Te),vs=function(n){oe(e,n);function e(t){var a=n.call(this,t)||this;return a.destination=t,a}return e}(re),E=function(n){oe(e,n);function e(){var t=n.call(this)||this;return t.observers=[],t.closed=!1,t.isStopped=!1,t.hasError=!1,t.thrownError=null,t}return e.prototype[Ke]=function(){return new vs(this)},e.prototype.lift=function(t){var a=new Jt(this,this);return a.operator=t,a},e.prototype.next=function(t){if(this.closed)throw new le;if(!this.isStopped)for(var a=this.observers,s=a.length,i=a.slice(),o=0;o<s;o++)i[o].next(t)},e.prototype.error=function(t){if(this.closed)throw new le;this.hasError=!0,this.thrownError=t,this.isStopped=!0;for(var a=this.observers,s=a.length,i=a.slice(),o=0;o<s;o++)i[o].error(t);this.observers.length=0},e.prototype.complete=function(){if(this.closed)throw new le;this.isStopped=!0;for(var t=this.observers,a=t.length,s=t.slice(),i=0;i<a;i++)s[i].complete();this.observers.length=0},e.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},e.prototype._trySubscribe=function(t){if(this.closed)throw new le;return n.prototype._trySubscribe.call(this,t)},e.prototype._subscribe=function(t){if(this.closed)throw new le;return this.hasError?(t.error(this.thrownError),Te.EMPTY):this.isStopped?(t.complete(),Te.EMPTY):(this.observers.push(t),new gs(this,t))},e.prototype.asObservable=function(){var t=new _t;return t.source=this,t},e.create=function(t,a){return new Jt(t,a)},e}(_t),Jt=function(n){oe(e,n);function e(t,a){var s=n.call(this)||this;return s.destination=t,s.source=a,s}return e.prototype.next=function(t){var a=this.destination;a&&a.next&&a.next(t)},e.prototype.error=function(t){var a=this.destination;a&&a.error&&this.destination.error(t)},e.prototype.complete=function(){var t=this.destination;t&&t.complete&&this.destination.complete()},e.prototype._subscribe=function(t){var a=this.source;return a?this.source.subscribe(t):Te.EMPTY},e}(E);function u(n,e){window.parent.postMessage(n,"*",e)}let et=0;const pe=new Map;function _(n,e){return new Promise((t,a)=>{window.parent.postMessage({id:et,query:n},"*",e),pe.set(et,{resolve:t,reject:a}),et++})}class j{}let We;const _s=new Uint8Array(16);function ws(){if(!We&&(We=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!We))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return We(_s)}const P=[];for(let n=0;n<256;++n)P.push((n+256).toString(16).slice(1));function ks(n,e=0){return(P[n[e+0]]+P[n[e+1]]+P[n[e+2]]+P[n[e+3]]+"-"+P[n[e+4]]+P[n[e+5]]+"-"+P[n[e+6]]+P[n[e+7]]+"-"+P[n[e+8]]+P[n[e+9]]+"-"+P[n[e+10]]+P[n[e+11]]+P[n[e+12]]+P[n[e+13]]+P[n[e+14]]+P[n[e+15]]).toLowerCase()}const xs=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Kt={randomUUID:xs};function Ir(n,e,t){if(Kt.randomUUID&&!e&&!n)return Kt.randomUUID();n=n||{};const a=n.random||(n.rng||ws)();if(a[6]=a[6]&15|64,a[8]=a[8]&63|128,e){t=t||0;for(let s=0;s<16;++s)e[t+s]=a[s];return e}return ks(a)}class Es{constructor(e){this.id=e}close(){u({type:"closePopup",data:{popupId:this.id}})}}function Ss(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,n=>{const e=Math.random()*16|0;return(n==="x"?e:e&3|8).toString(16)})}class js{constructor(e,t){this.onRemove=t,this.uuid=Ss(),this.message=e.message,this.type=e.type??"message",this.callback=e.callback,this.create().catch(a=>console.error(a))}async create(){await _({type:ba,data:{message:this.message,type:this.type,uuid:this.uuid}})}async remove(){await _({type:ga,data:{uuid:this.uuid}}),this.onRemove()}triggerCallback(){this.callback()}}const Ps="triggerPlayerMessage",Cs="removePlayerMessage",Ts=r.enum(["message"]);r.object({message:r.string(),uuid:r.string(),type:Ts});r.object({uuid:r.string()});class As{constructor(e,t){this.onRemove=t,this.uuid=Ir(),this.message=e.message,this.type=e.type??"message",this.callback=e.callback,this.create().catch(a=>console.error(a))}async create(){await _({type:Ps,data:{message:this.message,type:this.type,uuid:this.uuid}})}async remove(){await _({type:Cs,data:{uuid:this.uuid}}),this.onRemove()}triggerCallback(){this.callback&&this.callback()}}class Ft{constructor(e){this.key=e}remove(){u({type:"unregisterMenu",data:{key:this.key}})}open(){u({type:"openMenu",data:{key:this.key}})}}class Gt{constructor(e,t){this.website=e,this._vertical=t.vertical,this._horizontal=t.horizontal}get vertical(){return this._vertical}set vertical(e){this._vertical=e,u({type:"modifyUIWebsite",data:{id:this.website.id,position:{vertical:this._vertical,horizontal:this._horizontal}}})}get horizontal(){return this._horizontal}set horizontal(e){this._horizontal=e,u({type:"modifyUIWebsite",data:{id:this.website.id,position:{vertical:this._vertical,horizontal:this._horizontal}}})}}class Xt{constructor(e,t){this.website=e,this._height=t.height,this._width=t.width}get height(){return this._height}set height(e){this._height=e,u({type:"modifyUIWebsite",data:{id:this.website.id,size:{height:this._height,width:this._width}}})}get width(){return this._height}set width(e){this._width=e,u({type:"modifyUIWebsite",data:{id:this.website.id,size:{height:this._height,width:this._width}}})}}class Qt{constructor(e,t){this.website=e,this._top=t.top,this._bottom=t.bottom,this._left=t.left,this._right=t.right}get top(){return this._top}set top(e){this._top=e,u({type:"modifyUIWebsite",data:{id:this.website.id,margin:{top:this._top}}})}get bottom(){return this._bottom}set bottom(e){this._bottom=e,u({type:"modifyUIWebsite",data:{id:this.website.id,margin:{bottom:this._bottom}}})}get left(){return this._left}set left(e){this._left=e,u({type:"modifyUIWebsite",data:{id:this.website.id,margin:{left:this._left}}})}get right(){return this._right}set right(e){this._right=e,u({type:"modifyUIWebsite",data:{id:this.website.id,margin:{right:this._right}}})}}class tt{constructor(e){this.id=e.id,this._url=e.url,this._visible=e.visible??!0,this._allowPolicy=e.allowPolicy??"",this._allowApi=e.allowApi??!1,this._position=new Gt(this,e.position),this._size=new Xt(this,e.size),this._margin=new Qt(this,e.margin??{})}get url(){return this._url}set url(e){this._url=e,u({type:"modifyUIWebsite",data:{id:this.id,url:this._url}})}get visible(){return this._visible}set visible(e){this._visible=e,u({type:"modifyUIWebsite",data:{id:this.id,visible:this._visible}})}get allowPolicy(){return this._allowPolicy}get allowApi(){return this._allowApi}get position(){return this._position}set position(e){this._position=new Gt(this,e),u({type:"modifyUIWebsite",data:{id:this.id,position:{vertical:this._position.vertical,horizontal:this._position.horizontal}}})}get size(){return this._size}set size(e){this._size=new Xt(this,e),u({type:"modifyUIWebsite",data:{id:this.id,size:{height:this._size.height,width:this._size.width}}})}get margin(){return this._margin}set margin(e){this._margin=new Qt(this,e),u({type:"modifyUIWebsite",data:{id:this.id,margin:{top:this._margin.top,bottom:this._margin.bottom,left:this._margin.left,right:this._margin.right}}})}close(){return _({type:"closeUIWebsite",data:this.id})}}class Ms extends j{constructor(){super(...arguments),this.callbacks=[]}async open(e){const t=await _({type:"openUIWebsite",data:e});return new tt(t)}async getAll(){return(await _({type:"getUIWebsites",data:void 0})).map(t=>new tt(t))}async getById(e){const t=await _({type:"getUIWebsiteById",data:e});return new tt(t)}}const Is=new Ms;class Ws extends j{constructor(){super(...arguments),this.callbacks=[x({type:"modalCloseTrigger",callback:e=>{this._closeCallback&&this._closeCallback(e)}})]}openModal(e,t){this._closeCallback=t,u({type:"openModal",data:e})}closeModal(){this._closeCallback=void 0,u({type:"closeModal",data:void 0})}}const Rs=new Ws;class Os extends j{constructor(){super(...arguments),this._callbacks=new Map,this.callbacks=[x({type:"buttonActionBarTrigger",callback:e=>{this._callbacks.has(e.id)&&this._callbacks.get(e.id)(e)}})]}addButton(e){e.callback!=null&&this._callbacks.set(e.id,e.callback);const t=Sr.safeParse(e);t.success&&t.data.type==="button"&&u({type:"addButtonActionBar",data:{id:t.data.id,label:t.data.label,type:t.data.type}});const a=jr.safeParse(e);a.success&&a.data.type==="action"&&u({type:"addButtonActionBar",data:{id:a.data.id,type:a.data.type,imageSrc:a.data.imageSrc,toolTip:a.data.toolTip}})}removeButton(e){this._callbacks.delete(e),u({type:"removeButtonActionBar",data:{id:e}})}}const Zs=new Os;class Us extends j{constructor(){super(...arguments),this.callbacks=[]}openBanner(e){u({type:"openBanner",data:e})}closeBanner(){u({type:"closeBanner"})}}const Ls=new Us;let ce=0;const er=new Map,tr=new Map,rr=new Map,nr=new Map,rt=new Map,nt=new Map;class Ns{constructor(e,t,a){this.remotePlayer=e,this.key=t,this.callback=a}call(){this.callback()}remove(){this.remotePlayer.removeAction(this.key)}}class Vs extends j{constructor(){super(),this.callbacks=[x({type:"buttonClickedEvent",callback:e=>{var s;const t=(s=tr.get(e.popupId))==null?void 0:s.get(e.buttonId),a=er.get(e.popupId);if(a===void 0)throw new Error('Could not find popup with ID "'+e.popupId+'"');t&&t(a)}}),x({type:"menuItemClicked",callback:e=>{const t=nr.get(e.menuItem);if(rr.get(e.menuItem)===void 0)throw new Error('Could not find menu named "'+e.menuItem+'"');t&&t(e.menuItem)}}),x({type:"messageTriggered",callback:e=>{const t=rt.get(e.uuid);t&&t.triggerCallback();const a=nt.get(e.uuid);a&&a.triggerCallback()}}),x({type:"remotePlayerClickedEvent",callback:e=>{const t=new Y(e);this.currentlyClickedRemotePlayer=t,this._onRemotePlayerClicked.next(t)}}),x({type:"actionsMenuActionClickedEvent",callback:e=>{var t;(t=this.currentlyClickedRemotePlayer)==null||t.callAction(e.actionName)}})],this._onRemotePlayerClicked=new E,this.onRemotePlayerClicked=this._onRemotePlayerClicked.asObservable()}openPopup(e,t,a){ce++;const s=new Es(ce),i=new Map;tr.set(ce,i);let o=0;for(const l of a){const d=l.callback;d&&i.set(o,()=>{d(s)}),o++}return u({type:"openPopup",data:{popupId:ce,targetObject:e,message:t,buttons:a.map(l=>({label:l.label,className:l.className}))}}),er.set(ce,s),s}registerMenuCommand(e,t){typeof t=="function"&&(t={callback:t,allow:void 0});const a={...t,allowApi:t.allowApi===void 0?t.iframe!==void 0:t.allowApi,key:t.key??Ir(),allow:t.allow},s=new Ft(a.key);if(a.iframe!==void 0)u({type:"registerMenu",data:{name:e,iframe:a.iframe,key:a.key,options:{allowApi:a.allowApi,allow:a.allow}}});else if(a.callback!==void 0)nr.set(a.key,a.callback),u({type:"registerMenu",data:{name:e,key:a.key,options:{allowApi:a.allowApi}}});else throw new Error("When adding a menu with WA.ui.registerMenuCommand, you must pass either an iframe or a callback");return rr.set(a.key,s),s}getMenuCommand(e){return Promise.resolve(new Ft(e))}addActionsMenuKeyToRemotePlayer(e,t){u({type:"addActionsMenuKeyToRemotePlayer",data:{id:e,actionKey:t}})}removeActionsMenuKeyFromRemotePlayer(e,t){u({type:"removeActionsMenuKeyFromRemotePlayer",data:{id:e,actionKey:t}})}displayBubble(){u({type:"displayBubble",data:void 0})}removeBubble(){u({type:"removeBubble",data:void 0})}displayActionMessage(e){const t=new js(e,()=>{rt.delete(t.uuid)});return rt.set(t.uuid,t),t}displayPlayerMessage(e){const t=new As(e,()=>{nt.delete(t.uuid)});return nt.set(t.uuid,t),t}get website(){return Is}get modal(){return Rs}get actionBar(){return Zs}get banner(){return Ls}}const Re=new Vs;class Y{constructor(e){this._variables={},this._variablesSubjects={},this.actions=new Map,this._position$=new E,this.position$=this._position$.asObservable(),this._playerId=e.playerId,this._name=e.name,this._userUuid=e.userUuid,this._availabilityStatus=e.availabilityStatus,this._outlineColor=e.outlineColor,this._position=e.position,this._variables=Object.fromEntries(e.variables);const t=this._variablesSubjects,a=this._variables;this.state=new Proxy({onVariableChange(s){let i=t[s];return i===void 0&&(i=new E,t[s]=i),i.asObservable()}},{get(s,i,o){return i in s?Reflect.get(s,i,o):a[i.toString()]},has(s,i){return i in s?!0:i.toString()in a}})}get playerId(){return this._playerId}get name(){return this._name}get uuid(){return this._userUuid}get outlineColor(){return this._outlineColor}get position(){return this._position}set position(e){this._position=e,this._position$.next(e)}destroy(){this._position$.complete();for(const e of Object.values(this._variablesSubjects))e==null||e.complete()}setVariable(e,t){this._variables[e]=t;const a=this._variablesSubjects[e];a&&a.next(t)}addAction(e,t){const a=new Ns(this,e,t);return this.actions.set(e,a),u({type:"addActionsMenuKeyToRemotePlayer",data:{id:this._playerId,actionKey:e}}),a}callAction(e){const t=this.actions.get(e);t&&t.call()}removeAction(e){this.actions.delete(e),u({type:"removeActionsMenuKeyFromRemotePlayer",data:{id:this._playerId,actionKey:e}})}sendEvent(e,t){return _({type:"dispatchEvent",data:{name:e,data:t,targetUserIds:[this._playerId]}})}}class Bs extends j{constructor(){super(...arguments),this.trackingPlayers=!1,this.trackingMovement=!1,this.sharedPlayersVariableStream={},this.remotePlayers=new Map,this._newRemotePlayersStream=new E,this.newRemotePlayersStream=this._newRemotePlayersStream.asObservable(),this._removeRemotePlayersStream=new E,this.removeRemotePlayersStream=this._removeRemotePlayersStream.asObservable(),this._playersMovedStream=new E,this.playersMovedStream=this._playersMovedStream.asObservable(),this.callbacks=[x({type:"setSharedPlayerVariable",callback:e=>{const t=this.remotePlayers.get(e.playerId);if(t===void 0){console.warn(`Received a variable message for a player that isn't connected. Did you forget to call "WA.players.configureTracking()"?. Ignoring.`,e);return}t.setVariable(e.key,e.value);const a=this.sharedPlayersVariableStream[e.key];a&&a.next({player:t,value:e.value})}}),x({type:"addRemotePlayer",callback:e=>{this.registerRemotePlayer(e)}}),x({type:"removeRemotePlayer",callback:e=>{const t=this.remotePlayers.get(e);t===void 0?console.warn("Could not find remote player to delete: ",e):(this.remotePlayers.delete(e),this._removeRemotePlayersStream.next(t),t.destroy())}}),x({type:"remotePlayerChanged",callback:e=>{const t=this.remotePlayers.get(e.playerId);if(t===void 0){console.warn("Could not find remote player with ID : ",e.playerId);return}if(e.position){const a=t.position;t.position=e.position,this._playersMovedStream.next({player:t,newPosition:e.position,oldPosition:a})}}})]}registerRemotePlayer(e){const t=new Y(e);this.remotePlayers.set(e.playerId,t),this._newRemotePlayersStream.next(t)}async configureTracking(e){const t=(e==null?void 0:e.players)??!0,a=(e==null?void 0:e.movement)??!0;if(t===this.trackingPlayers&&a===this.trackingMovement)return;this.trackingPlayers=t,this.trackingMovement=a;const s=await _({type:"enablePlayersTracking",data:{players:this.trackingPlayers,movement:this.trackingMovement}});if(t)for(const i of s)this.registerRemotePlayer(i)}onVariableChange(e){let t=this.sharedPlayersVariableStream[e];return t||(t=new E,this.sharedPlayersVariableStream[e]=t),t.asObservable()}get onPlayerEnters(){if(!this.trackingPlayers)throw new Error("Cannot call WA.players.onPlayerEnters. You forgot to call WA.players.configureTracking() first.");return this.newRemotePlayersStream}get onPlayerLeaves(){if(!this.trackingPlayers)throw new Error("Cannot call WA.players.onPlayerLeaves. You forgot to call WA.players.configureTracking() first.");return this.removeRemotePlayersStream}get onPlayerMoves(){if(!this.trackingMovement)throw new Error("Cannot call WA.players.onPlayerMoves(). You forgot to call WA.players.configureTracking() first.");return this.playersMovedStream}get(e){return this.remotePlayers.get(e)}list(){return this.remotePlayers.values()}}const Wr=new Bs,ar=new E;class zs extends j{constructor(){super(...arguments),this.callbacks=[x({callback:e=>{ar.next(e)},type:"userInputChat"})]}open(){u({type:"openChat",data:void 0})}close(){u({type:"closeChat",data:void 0})}sendChatMessage(e,t){typeof t=="string"?t={scope:"local",author:t}:t===void 0&&(t={scope:"local"}),u({type:"chat",data:{message:e,options:t}})}startTyping(e){e.scope==="bubble"?u({type:"newChatMessageWritingStatus",data:Ye.userWriting}):u({type:"startWriting",data:{author:e.author}})}stopTyping(e){e.scope==="bubble"?u({type:"newChatMessageWritingStatus",data:Ye.userStopWriting}):u({type:"stopWriting",data:{author:e.author}})}onChatMessage(e,t){const a=t??{scope:"local"};return ar.subscribe(s=>{if(a.scope==="local"&&s.senderId!==void 0||a.scope==="bubble"&&s.senderId===void 0)return;const i=s.senderId;let o,l;if(i!==void 0){const d=i.lastIndexOf("_");d!==void 0&&d!==-1&&(o=i.substring(0,d),l=Number(i.substring(d+1)))}e(s.message,{authorId:l,author:l&&o===WA.room.id?Wr.get(l):void 0})})}}const at=new zs;class sr{constructor(e){this.id=e}close(){return _({type:"closeCoWebsite",data:this.id})}}class Ds extends j{constructor(){super(...arguments),this.callbacks=[]}openTab(e){u({type:"openTab",data:{url:e}})}goToPage(e){u({type:"goToPage",data:{url:e}})}goToRoom(e){u({type:"loadPage",data:{url:e}})}async openCoWebSite(e,t,a,s,i,o,l){const d=await _({type:"openCoWebsite",data:{url:e,allowApi:t,allowPolicy:a,widthPercent:s,position:i,closable:o,lazy:l}});return new sr(d.id)}async getCoWebSites(){return(await _({type:"getCoWebsites",data:void 0})).map(t=>new sr(t.id))}closeCoWebSite(){return _({type:"closeCoWebsites",data:void 0})}goToLogin(){return _({type:"goToLogin",data:void 0})}}const G=new Ds;class $s extends j{constructor(){super(...arguments),this.callbacks=[]}disablePlayerControls(){u({type:"disablePlayerControls",data:void 0})}restorePlayerControls(){u({type:"restorePlayerControls",data:void 0})}turnOffMicrophone(){u({type:"turnOffMicrophone",data:void 0})}turnOffWebcam(){u({type:"turnOffWebcam",data:void 0})}disableMicrophone(){u({type:"disableMicrophone",data:void 0})}restoreMicrophone(){u({type:"restoreMicrophone",data:void 0})}disableWebcam(){u({type:"disableWebcam",data:void 0})}restoreWebcam(){u({type:"restoreWebcam",data:void 0})}disablePlayerProximityMeeting(){u({type:"disablePlayerProximityMeeting",data:void 0})}restorePlayerProximityMeeting(){u({type:"restorePlayerProximityMeeting",data:void 0})}disableMapEditor(){u({type:"disableMapEditor",data:void 0})}restoreMapEditor(){u({type:"restoreMapEditor",data:void 0})}disableScreenSharing(){u({type:"disableScreenSharing",data:void 0})}restoreScreenSharing(){u({type:"restoreScreenSharing",data:void 0})}disableWheelZoom(){u({type:"disableWheelZoom",data:void 0})}restoreWheelZoom(){u({type:"restoreWheelZoom",data:void 0})}disableRightClick(){u({type:"disableRightClick",data:void 0})}restoreRightClick(){u({type:"restoreRightClick",data:void 0})}disableInviteButton(){u({type:"disableInviteUserButton",data:void 0})}restoreInviteButton(){u({type:"restoreInviteUserButton",data:void 0})}disableRoomList(){u({type:"disableRoomList",data:void 0})}restoreRoomList(){u({type:"restoreRoomList",data:void 0})}}const st=new $s;class qs{constructor(e){this.url=e,u({type:"loadSound",data:{url:this.url}})}play(e){return u({type:"playSound",data:{url:this.url,config:e}}),this.url}stop(){return u({type:"stopSound",data:{url:this.url}}),this.url}}class Ys extends j{constructor(){super(...arguments),this.callbacks=[]}loadSound(e){return new qs(e)}}const ir=new Ys;class Hs{constructor(){this.receivedEventResolvers=new E,this.eventSubscribers=new Map,this.receivedEventResolvers.subscribe(e=>{const t=this.eventSubscribers.get(e.name);t!==void 0&&t.next(e)})}on(e){let t=this.eventSubscribers.get(e);return t===void 0&&(t=new E,this.eventSubscribers.set(e,t)),t.asObservable()}}class Js extends Hs{constructor(){super(),this.callbacks=[x({type:"receiveEvent",callback:e=>{this.receivedEventResolvers.next(e)}})]}broadcast(e,t){return _({type:"dispatchEvent",data:{name:e,data:t}})}}const Ks=new Js;class or{constructor(e){this.config=e,this.name=e.name,this._url=e.url,this._visible=e.visible??!0,this._position=e.position,this._scale=e.scale??1}get url(){return this._url}set url(e){this._url=e,u({type:"modifyEmbeddedWebsite",data:{name:this.name,url:this._url}})}get visible(){return this._visible}set visible(e){this._visible=e,u({type:"modifyEmbeddedWebsite",data:{name:this.name,visible:this._visible}})}get x(){return this._position.x}set x(e){this._position.x=e,u({type:"modifyEmbeddedWebsite",data:{name:this.name,x:this._position.x}})}get y(){return this._position.y}set y(e){this._position.y=e,u({type:"modifyEmbeddedWebsite",data:{name:this.name,y:this._position.y}})}get width(){return this._position.width}set width(e){this._position.width=e,u({type:"modifyEmbeddedWebsite",data:{name:this.name,width:this._position.width}})}get height(){return this._position.height}set height(e){this._position.height=e,u({type:"modifyEmbeddedWebsite",data:{name:this.name,height:this._position.height}})}get scale(){return this._scale}set scale(e){this._scale=e,u({type:"modifyEmbeddedWebsite",data:{name:this.name,scale:this._scale}})}}class Fs extends j{constructor(){super(...arguments),this.callbacks=[]}async get(e){const t=await _({type:"getEmbeddedWebsite",data:e});return new or(t)}create(e){return _({type:"createEmbeddedWebsite",data:e}).catch(t=>{console.error(t)}),new or(e)}async delete(e){return await _({type:"deleteEmbeddedWebsite",data:e})}}const Gs=new Fs;class lr{constructor(e){this.type="area",this.class="area",this.config=e,this.name=e.name,this._x=e.x,this._y=e.y,this._width=e.width,this._height=e.height}setProperty(e,t){u({type:"setAreaProperty",data:{areaName:this.name,propertyName:e,propertyValue:t}})}get x(){return this._x}set x(e){this._x=e,u({type:"modifyArea",data:{name:this.name,x:this._x}})}set y(e){this._y=e,u({type:"modifyArea",data:{name:this.name,y:this._y}})}get y(){return this._y}set width(e){this._width=e,u({type:"modifyArea",data:{name:this.name,width:this._width}})}get width(){return this._width}set height(e){this._height=e,u({type:"modifyArea",data:{name:this.name,height:this._height}})}get height(){return this._height}}const Oe=new Map,Ze=new Map;class Xs extends j{constructor(){super(...arguments),this.callbacks=[x({type:"enterAreaEvent",callback:e=>{var t;(t=Oe.get(e.name))==null||t.next()}}),x({type:"leaveAreaEvent",callback:e=>{var t;(t=Ze.get(e.name))==null||t.next()}})]}create(e){return _({type:"createArea",data:e}),new lr(e)}async get(e){const t=await _({type:"getArea",data:e});return new lr(t)}async delete(e){await _({type:"deleteArea",data:e}),Oe.delete(e),Ze.delete(e)}onEnter(e){let t=Oe.get(e);return t===void 0&&(t=new E,Oe.set(e,t)),t.asObservable()}onLeave(e){let t=Ze.get(e);return t===void 0&&(t=new E,Ze.set(e,t)),t.asObservable()}}const Qs=new Xs,it=new Map,ot=new Map,lt=new Map,ct=new Map;let wt;const ei=n=>{wt=n};let kt;const ti=n=>{kt=n};let xt;const ri=n=>{xt=n};class ni extends j{constructor(){super(...arguments),this.callbacks=[x({callback:e=>{var t;(t=it.get(e.name))==null||t.next()},type:"enterEvent"}),x({type:"leaveEvent",callback:e=>{var t;(t=ot.get(e.name))==null||t.next()}}),x({type:"enterLayerEvent",callback:e=>{var t;(t=lt.get(e.name))==null||t.next()}}),x({type:"leaveLayerEvent",callback:e=>{var t;(t=ct.get(e.name))==null||t.next()}})]}onEnterZone(e,t){let a=it.get(e);return a===void 0&&(a=new E,it.set(e,a)),a.subscribe(t)}onLeaveZone(e,t){let a=ot.get(e);return a===void 0&&(a=new E,ot.set(e,a)),a.subscribe(t)}onEnterLayer(e){let t=lt.get(e);return t===void 0&&(t=new E,lt.set(e,t)),t.asObservable()}onLeaveLayer(e){let t=ct.get(e);return t===void 0&&(t=new E,ct.set(e,t)),t.asObservable()}showLayer(e){u({type:"showLayer",data:{name:e}})}hideLayer(e){u({type:"hideLayer",data:{name:e}})}setProperty(e,t,a){u({type:"setProperty",data:{layerName:e,propertyName:t,propertyValue:a}})}async getTiledMap(){return(await _({type:"getMapData",data:void 0})).data}setTiles(e){u({type:"setTiles",data:e})}get id(){if(wt===void 0)throw new Error("Room id not initialized yet. You should call WA.room.id within a WA.onInit callback.");return wt}get mapURL(){if(xt===void 0)throw new Error("mapURL is not initialized yet. You should call WA.room.mapURL within a WA.onInit callback.");return xt}get hashParameters(){if(kt===void 0)throw new Error("hashParameters is not initialized yet. You should call WA.room.hashParameters within a WA.onInit callback.");return kt}async loadTileset(e){return await _({type:"loadTileset",data:{url:e}})}get website(){return Gs}get area(){return Qs}}const dt=new ni;class Rr{constructor(){this.setVariableResolvers=new E,this.variables={},this.variableSubscribers={},this.setVariableResolvers.subscribe(e=>{this.variables[e.key]=e.value;const t=this.variableSubscribers[e.key];t!==void 0&&t.next(e.value)})}initVariables(e){for(const[t,a]of e.entries())t in this.variables||(this.variables[t]=a)}loadVariable(e){return this.variables[e]}hasVariable(e){return e in this.variables}onVariableChange(e){let t=this.variableSubscribers[e];return t===void 0&&(t=new E,this.variableSubscribers[e]=t),t.asObservable()}}class ai extends Rr{constructor(){super(),this.callbacks=[x({type:"setVariable",callback:e=>{this.setVariableResolvers.next(e)}})]}saveVariable(e,t){if(this.variables[e]===t&&typeof t!="object")return Promise.resolve();this.variables[e]=t;const a=this.variableSubscribers[e];return a&&a.next(t),_({type:"setVariable",data:{key:e,value:t}})}}function si(){return new Proxy(new ai,{get(n,e,t){return e in n?Reflect.get(n,e,t):n.loadVariable(e.toString())},set(n,e,t,a){return n.saveVariable(e.toString(),t).catch(s=>console.error(s)),!0},has(n,e){return e in n?!0:n.hasVariable(e.toString())}})}class ii extends Rr{constructor(){super(),this.callbacks=[x({type:"setPlayerVariable",callback:e=>{this.setVariableResolvers.next(e)}})]}saveVariable(e,t,a){if(a&&a.ttl!==void 0&&!a.persist)throw new Error("A variable that has a ttl set must be persisted with 'persist = true'");if(a&&a.scope==="world"&&!a.persist)throw new Error("A variable that has a 'world' scope must be persisted with 'persist = true'");this.variables[e]=t;const s=this.variableSubscribers[e];return s&&s.next(t),_({type:"setPlayerVariable",data:{key:e,value:t,public:(a==null?void 0:a.public)??!1,ttl:(a==null?void 0:a.ttl)??void 0,persist:(a==null?void 0:a.persist)??!0,scope:(a==null?void 0:a.scope)??"world"}})}}const oi=new Proxy(new ii,{get(n,e,t){return e in n?Reflect.get(n,e,t):n.loadVariable(e.toString())},set(n,e,t,a){return n.saveVariable(e.toString(),t).catch(s=>console.error(s)),!0},has(n,e){return e in n?!0:n.hasVariable(e.toString())}});class li{appendAudioData(e){return _({type:"appendPCMData",data:{data:e}},[e.buffer])}async resetAudioBuffer(){await _({type:"resetAudioBuffer",data:void 0})}close(){return _({type:"stopStreamInBubble",data:void 0})}}class ci extends j{constructor(){super(...arguments),this.pcmDataStream=new E,this.callbacks=[x({type:"joinProximityMeetingEvent",callback:e=>{var t;(t=this.joinStream)==null||t.next(e.users.map(a=>new Y(a)))}}),x({type:"participantJoinProximityMeetingEvent",callback:e=>{var t;(t=this.participantJoinStream)==null||t.next(new Y(e.user))}}),x({type:"participantLeaveProximityMeetingEvent",callback:e=>{var t;(t=this.participantLeaveStream)==null||t.next(new Y(e.user))}}),x({type:"leaveProximityMeetingEvent",callback:()=>{var e;(e=this.leaveStream)==null||e.next()}}),x({type:"onFollowed",callback:e=>{var t;(t=this.followedStream)==null||t.next(new Y(e.user))}}),x({type:"onUnfollowed",callback:e=>{var t;(t=this.unfollowedStream)==null||t.next(new Y(e.user))}}),x({type:"appendPCMData",callback:e=>{this.pcmDataStream.next(e.data)}})]}onJoin(){return this.joinStream===void 0&&(this.joinStream=new E),this.joinStream}onParticipantJoin(){return this.participantJoinStream===void 0&&(this.participantJoinStream=new E),this.participantJoinStream}onParticipantLeave(){return this.participantLeaveStream===void 0&&(this.participantLeaveStream=new E),this.participantLeaveStream}onLeave(){return this.leaveStream===void 0&&(this.leaveStream=new E),this.leaveStream}async playSound(e){await _({type:"playSoundInBubble",data:{url:e}})}async startAudioStream(e){return await _({type:"startStreamInBubble",data:{sampleRate:e}}),new li}listenToAudioStream(e){return new _t(t=>{u({type:"startListeningToStreamInBubble",data:{sampleRate:e}});const a=this.pcmDataStream.subscribe(t);return()=>{a.unsubscribe(),u({type:"stopListeningToStreamInBubble",data:void 0})}})}async followMe(){await _({type:"followMe",data:void 0})}async stopLeading(){await _({type:"stopLeading",data:void 0})}onFollowed(){return this.followedStream===void 0&&(this.followedStream=new E),this.followedStream}onUnfollowed(){return this.unfollowedStream===void 0&&(this.unfollowedStream=new E),this.unfollowedStream}}const cr=new E;let Et;const di=n=>{Et=n};let St;const ui=n=>{St=n};let jt;const hi=n=>{jt=n};let Pt;const pi=n=>{Pt=n};let Ct;const fi=n=>{Ct=n};let fe;const mi=n=>{fe=n};let Tt;const yi=n=>{Tt=n===!0};class bi extends j{constructor(){super(...arguments),this.state=oi,this._proximityMeeting=new ci,this.callbacks=[x({type:"hasPlayerMoved",callback:e=>{cr.next(e)}})]}get name(){if(Et===void 0)throw new Error("Player name not initialized yet. You should call WA.player.name within a WA.onInit callback.");return Et}get id(){if(fe===void 0)throw new Error("Player id not initialized yet. You should call WA.player.id within a WA.onInit callback.");return fe}get playerId(){if(Ct===void 0)throw new Error("Player id not initialized yet. You should call WA.player.playerId within a WA.onInit callback.");return Ct}get uuid(){if(fe===void 0)throw new Error("Player id not initialized yet. You should call WA.player.uuid within a WA.onInit callback.");return fe}get language(){if(St===void 0)throw new Error("Player language not initialized yet. You should call WA.player.language within a WA.onInit callback.");return St}get tags(){if(jt===void 0)throw new Error("Tags not initialized yet. You should call WA.player.tags within a WA.onInit callback.");return jt}async getPosition(){return await _({type:"getPlayerPosition",data:void 0})}onPlayerMove(e){const t=cr.subscribe(e);return u({type:"onPlayerMove",data:void 0}),t}async moveTo(e,t,a){return await _({type:"movePlayerTo",data:{x:e,y:t,speed:a}})}async teleport(e,t){return await _({type:"teleportPlayerTo",data:{x:e,y:t}})}get userRoomToken(){if(Pt===void 0)throw new Error("User-room token not initialized yet. You should call WA.player.userRoomToken within a WA.onInit callback.");return Pt}setOutlineColor(e,t,a){return _({type:"setPlayerOutline",data:{red:e,green:t,blue:a}})}removeOutlineColor(){return _({type:"removePlayerOutline",data:void 0})}get proximityMeeting(){return this._proximityMeeting}get isLogged(){if(Tt===void 0)throw new Error("IsLogged not initialized yet. You should call WA.player.isLogged within a WA.onInit callback.");return Tt}getWokaPicture(){return _({type:"getWoka",data:void 0})}}const Or=new bi,dr=new E;class gi extends j{constructor(){super(...arguments),this.callbacks=[x({type:"wasCameraUpdated",callback:e=>{dr.next(e)}})]}followPlayer(e=!1,t){u({type:"cameraFollowPlayer",data:{smooth:e,duration:t}})}set(e,t,a,s,i=!1,o=!1,l){u({type:"cameraSet",data:{x:e,y:t,width:a,height:s,lock:i,smooth:o,duration:l}})}onCameraUpdate(){return u({type:"onCameraUpdate",data:void 0}),dr.asObservable()}}const vi=new gi;function _i(n){const e=n.properties.find(t=>t.type==="areaDescriptionProperties");return{id:n.id,name:n.name,description:e==null?void 0:e.description,searchable:e==null?void 0:e.searchable,x:n.x,y:n.y,width:n.width,height:n.height}}const ut=new Map,ht=new Map;class wi extends j{constructor(){super(...arguments),this.callbacks=[x({type:"enterMapEditorAreaEvent",callback:e=>{var t;(t=ut.get(e.name))==null||t.next()}}),x({type:"leaveMapEditorAreaEvent",callback:e=>{var t;(t=ht.get(e.name))==null||t.next()}})]}onEnter(e){let t=ut.get(e);return t===void 0&&(t=new E,ut.set(e,t)),t.asObservable()}onLeave(e){let t=ht.get(e);return t===void 0&&(t=new E,ht.set(e,t)),t.asObservable()}getWamMap(){return this.wamMapCache?this.wamMapCache:(this.wamMapCache=_({type:"getWamMapData",data:void 0}).then(e=>e.data),this.wamMapCache)}async list(){const e=await this.getWamMap();if(e===void 0)throw new Error("This is a public map. The map editor is not available on public maps.");return e.areas.map(_i)}}const ki=new wi;class xi extends j{constructor(){super(...arguments),this.callbacks=[]}get area(){return ki}}const Ei=new xi,Zr=si();let Ur,Lr;const Si=n=>{Ur=n},ji=n=>{Lr=n},Pi=_({type:"getState",data:void 0}).then(n=>{fi(n.playerId),di(n.nickname),ui(n.language),ei(n.roomId),ti(n.hashParameters),ri(n.mapUrl),hi(n.tags),mi(n.uuid),pi(n.userRoomToken),Si(n.metadata),ji(n.iframeId),Zr.initVariables(n.variables),Or.state.initVariables(n.playerVariables),yi(n.isLogged)}),Ci={ui:Re,nav:G,controls:st,chat:at,sound:ir,room:dt,player:Or,players:Wr,camera:vi,state:Zr,event:Ks,mapEditor:Ei,onInit(){return Pi},get metadata(){return Ur},get iframeId(){return Lr},sendChatMessage(n,e){console.warn("Method WA.sendChatMessage is deprecated. Please use WA.chat.sendChatMessage instead"),at.sendChatMessage(n,e)},disablePlayerControls(){console.warn("Method WA.disablePlayerControls is deprecated. Please use WA.controls.disablePlayerControls instead"),st.disablePlayerControls()},restorePlayerControls(){console.warn("Method WA.restorePlayerControls is deprecated. Please use WA.controls.restorePlayerControls instead"),st.restorePlayerControls()},displayBubble(){console.warn("Method WA.displayBubble is deprecated. Please use WA.ui.displayBubble instead"),Re.displayBubble()},removeBubble(){console.warn("Method WA.removeBubble is deprecated. Please use WA.ui.removeBubble instead"),Re.removeBubble()},openTab(n){console.warn("Method WA.openTab is deprecated. Please use WA.nav.openTab instead"),G.openTab(n)},loadSound(n){return console.warn("Method WA.loadSound is deprecated. Please use WA.sound.loadSound instead"),ir.loadSound(n)},goToPage(n){console.warn("Method WA.goToPage is deprecated. Please use WA.nav.goToPage instead"),G.goToPage(n)},goToRoom(n){console.warn("Method WA.goToRoom is deprecated. Please use WA.nav.goToRoom instead"),G.goToRoom(n)},openCoWebSite(n,e=!1,t=""){return console.warn("Method WA.openCoWebSite is deprecated. Please use WA.nav.openCoWebSite instead"),G.openCoWebSite(n,e,t)},closeCoWebSite(){return console.warn("Method WA.closeCoWebSite is deprecated. Please use WA.nav.closeCoWebSite instead"),G.closeCoWebSite()},openPopup(n,e,t){return console.warn("Method WA.openPopup is deprecated. Please use WA.ui.openPopup instead"),Re.openPopup(n,e,t)},onChatMessage(n){console.warn("Method WA.onChatMessage is deprecated. Please use WA.chat.onChatMessage instead"),at.onChatMessage(n)},onEnterZone(n,e){console.warn("Method WA.onEnterZone is deprecated. Please use WA.room.onEnterZone instead"),dt.onEnterZone(n,e)},onLeaveZone(n,e){console.warn("Method WA.onLeaveZone is deprecated. Please use WA.room.onLeaveZone instead"),dt.onLeaveZone(n,e)}};window.WA=Ci;window.addEventListener("message",n=>{if(n.source!==window.parent)return;const e=n.data,t=ls.safeParse(e);if(t.success){const a=t.data,s=a.id,i=a.error,o=pe.get(s);if(o===void 0)throw new Error("In Iframe API, got an error answer for a question that we have no track of.");o.reject(new Error(i)),pe.delete(s)}else if(os(e)){const a=e.id,s=e.data,i=pe.get(a);if(i===void 0)throw new Error("In Iframe API, got an answer for a question that we have no track of.");i.resolve(s),pe.delete(a)}else{const a=ss.safeParse(e);if(a.success){const s=a.data,i=Ue[s.type];if(i===void 0)throw new Error('Missing event handler for event of type "'+s.type+"'");for(const o of i)o==null||o(s.data)}else if(is.safeParse(e).success)throw new Error("Could not parse message received from WorkAdventure. Message:"+JSON.stringify(e))}});
//# sourceMappingURL=iframe_api.js.map